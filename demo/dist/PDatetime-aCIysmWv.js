class t extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this._view=new Date,this._step=15,this._weekStart=1,this._viewMode="day",this._animating=!1,this._navigationDirection=null,this._touchStartX=0,this._touchEndX=0,this._modeConfig={date:{showCalendar:!0,showTime:!1,showQuickDates:!0,formatOpts:{dateStyle:"medium"},placeholders:{single:"Select date...",rangeFrom:"Start date...",rangeTo:"End date..."}},datetime:{showCalendar:!0,showTime:!0,showQuickDates:!0,formatOpts:{dateStyle:"medium",timeStyle:"short"},placeholders:{single:"Select date & time...",rangeFrom:"Start date & time...",rangeTo:"End date & time..."}},time:{showCalendar:!1,showTime:!0,showQuickDates:!1,formatOpts:{timeStyle:"short"},placeholders:{single:"Select time...",rangeFrom:"Start time...",rangeTo:"End time..."}}},this.shadowRoot.innerHTML='\n          <style>\n            /* Global Hidden Rule */\n            [hidden] {\n              display: none !important;\n            }\n\n            /* Host & Core Properties */\n            :host {\n              display: inline-block;\n              position: relative;\n              box-sizing: border-box;\n\n              /* Colors */\n              --datetime-text: currentColor;\n              --datetime-muted: rgba(0, 0, 0, 0.5);\n              --datetime-accent: #3b82f6;\n              --datetime-hover: rgba(0, 0, 0, 0.05);\n              --datetime-bg: #ffffff;\n              --datetime-border: rgba(0, 0, 0, 0.1);\n              --datetime-shadow-color: rgba(0, 0, 0, 0.12);\n              --datetime-focus-shadow: rgba(59, 130, 246, 0.1);\n              --datetime-btn-hover-bg: rgba(0, 0, 0, 0.08);\n\n              /* Opacity */\n              --datetime-placeholder-opacity: 0.6;\n              --datetime-icon-opacity: 0.7;\n              --datetime-disabled-opacity: 0.3;\n\n              /* Spacing */\n              --datetime-padding-x: 0.75em;\n              --datetime-padding-y: 0.375em;\n              --datetime-space-xs: 0.125em;\n              --datetime-space-sm: 0.25em;\n              --datetime-space-md: 0.5em;\n              --datetime-space-lg: 0.75em;\n              --datetime-gap: 0.5em;\n\n              /* Border Radius */\n              --datetime-radius: 0.5em;\n              --datetime-radius-lg: 0.75em;\n              --datetime-radius-xl: 1em;\n\n              /* Borders */\n              --datetime-border-width: 1px;\n              --datetime-focus-ring-width: 2px;\n              --datetime-today-border-width: 2px;\n\n              /* Shadows */\n              --datetime-shadow: 0 0.625em 1.875em var(--datetime-shadow-color);\n\n              /* Timing */\n              --datetime-transition: 0.15s ease;\n              --datetime-animation-duration: 0.5s;\n\n              /* Sizes */\n              --datetime-cell-size: 2.5em;\n              --datetime-font-sm: 0.75em;\n              --datetime-font-md: 0.875em;\n            }\n\n            @media (prefers-color-scheme: dark) {\n              :host {\n                --datetime-muted: rgba(255, 255, 255, 0.5);\n                --datetime-hover: rgba(255, 255, 255, 0.1);\n              }\n            }\n\n            /* Shared - Border Properties */\n            .panel,\n            .time-select,\n            .ampm,\n            .preset,\n            .btn {\n              border: var(--datetime-border-width) solid var(--datetime-border);\n            }\n\n            .grid-container,\n            .time,\n            .quick-dates,\n            .actions {\n              border-top: var(--datetime-border-width) solid var(--datetime-border);\n            }\n\n            /* Shared - Border Radius */\n            .nav button,\n            .month-year,\n            .day,\n            .month,\n            .year,\n            .time-select,\n            .ampm,\n            .btn {\n              border-radius: var(--datetime-radius);\n            }\n\n            /* Shared - Flex Center Layout */\n            .calendar-btn,\n            .nav button,\n            .month-year,\n            .day,\n            .month,\n            .year,\n            .time,\n            .btn {\n              display: flex;\n              align-items: center;\n              justify-content: center;\n            }\n\n            /* Shared - Transitions (only for users who prefer motion) */\n            @media (prefers-reduced-motion: no-preference) {\n              .panel,\n              .nav button,\n              .day,\n              .month,\n              .year,\n              .time-select,\n              .ampm,\n              .btn {\n                transition: all var(--datetime-transition);\n              }\n            }\n\n            /* Shared - Font Sizes */\n            .month-year,\n            .day,\n            .month,\n            .year,\n            .time-select,\n            .ampm,\n            .btn {\n              font-size: var(--datetime-font-md);\n            }\n\n            .preset,\n            .range-info {\n              font-size: 0.8em;\n            }\n\n            /* Shared - Hover States (consolidated for performance) */\n            @media (hover: hover) {\n              .calendar-btn:hover,\n              .nav button:hover,\n              .month-year:hover {\n                background: var(--datetime-hover);\n                color: var(--datetime-accent);\n              }\n\n              .day:hover,\n              .month:hover,\n              .year:hover {\n                background: var(--datetime-hover);\n              }\n\n              .time-select:hover,\n              .ampm:hover {\n                border-color: var(--datetime-accent);\n                background-color: var(--datetime-hover);\n              }\n\n              .preset:hover {\n                background: var(--datetime-accent);\n                color: var(--datetime-bg);\n                border-color: var(--datetime-accent);\n              }\n\n              .btn:hover {\n                background: var(--datetime-btn-hover-bg);\n                border-color: var(--datetime-accent);\n              }\n\n              .btn.primary:hover {\n                opacity: 0.9;\n              }\n            }\n\n            /* Field & Input Containers */\n            .field {\n              font: inherit;\n              position: absolute;\n              top: 0;\n              left: 0;\n              right: 0;\n              bottom: 0;\n              display: flex;\n              align-items: stretch;\n              box-sizing: border-box;\n              border-radius: inherit;\n              overflow: hidden;\n            }\n\n            .input {\n              padding: var(--datetime-padding-y) var(--datetime-padding-x);\n              color: var(--datetime-text);\n              overflow: hidden;\n              white-space: nowrap;\n              text-overflow: ellipsis;\n              flex: 1;\n              min-width: 0;\n              display: flex;\n              align-items: center;\n              transition: box-shadow var(--datetime-transition);\n              border-radius: inherit;\n            }\n\n            .input:first-of-type:not(:only-of-type) {\n              border-top-right-radius: 0;\n              border-bottom-right-radius: 0;\n            }\n\n            .input:nth-of-type(2) {\n              border-left: var(--datetime-border-width) solid var(--datetime-border);\n              border-top-left-radius: 0;\n              border-bottom-left-radius: 0;\n            }\n\n            .input.is-focused {\n              box-shadow: inset 0 0 0 var(--datetime-focus-ring-width) var(--datetime-accent);\n            }\n\n            .input[data-placeholder]:empty::before {\n              content: attr(data-placeholder);\n              color: var(--datetime-muted);\n              opacity: var(--datetime-placeholder-opacity);\n            }\n\n            /* Buttons - Base Reset */\n            .nav button,\n            .month-year,\n            .calendar-btn,\n            .day,\n            .month,\n            .year,\n            .preset,\n            .btn {\n              background: none;\n              border: none;\n              cursor: pointer;\n              color: inherit;\n            }\n\n            .calendar-btn {\n              padding: 0 var(--datetime-padding-x);\n              opacity: var(--datetime-icon-opacity);\n            }\n\n            /* Panel */\n            .panel {\n              position: absolute;\n              top: 100%;\n              left: 0;\n              margin-top: var(--datetime-gap);\n              background: var(--datetime-bg);\n              border-radius: var(--datetime-radius-lg);\n              box-shadow: var(--datetime-shadow);\n              padding: var(--datetime-space-lg);\n              z-index: 9;\n              min-width: 20em;\n              opacity: 0;\n              transform: translateY(-0.5em);\n              pointer-events: none;\n            }\n\n            .panel.open {\n              opacity: 1;\n              transform: translateY(0);\n              pointer-events: all;\n            }\n\n            /* Navigation */\n            .nav {\n              display: flex;\n              align-items: center;\n              justify-content: space-between;\n              margin: 0;\n              padding-bottom: var(--datetime-space-lg);\n            }\n\n            .nav button {\n              padding: var(--datetime-gap);\n              color: var(--datetime-muted);\n            }\n\n            .month-year {\n              font-weight: 600;\n              padding: var(--datetime-space-sm) var(--datetime-gap);\n              transition: background-color var(--datetime-transition);\n              color: var(--datetime-text);\n              gap: var(--datetime-space-sm);\n            }\n\n            .month-year:active {\n              background: var(--datetime-hover);\n              opacity: 0.8;\n            }\n\n            .month-year svg {\n              opacity: var(--datetime-placeholder-opacity);\n              margin-left: var(--datetime-space-xs);\n            }\n\n            /* Grids - Container & Layout */\n            .grid-container {\n              padding-top: var(--datetime-space-lg);\n              position: relative;\n              overflow: hidden;\n              height: 18.75em;\n            }\n\n            .grid {\n              display: grid;\n              grid-template-columns: repeat(7, 1fr);\n              gap: var(--datetime-space-xs);\n              justify-items: center;\n              align-content: start;\n              grid-template-rows: 2em repeat(6, var(--datetime-cell-size));\n              height: 18em;\n            }\n\n            .grid.month-view,\n            .grid.year-view {\n              grid-template-columns: repeat(3, 1fr);\n              grid-template-rows: repeat(4, 1fr);\n              gap: var(--datetime-gap);\n            }\n\n            .grid--animating {\n              position: absolute;\n              top: var(--datetime-space-lg);\n              left: 0;\n              right: 0;\n            }\n\n            .grid.animating {\n              transition: transform var(--datetime-animation-duration) cubic-bezier(0.5, 0, 0, 1);\n            }\n\n            .grid--prev.grid--out {\n              transform: translateX(100%);\n            }\n\n            .grid--prev.grid--in {\n              transform: translateX(-100%);\n            }\n\n            .grid--next.grid--out {\n              transform: translateX(-100%);\n            }\n\n            .grid--next.grid--in {\n              transform: translateX(100%);\n            }\n\n            .grid:not(.grid--in):not(.grid--out) {\n              transform: translateX(0);\n            }\n\n            @media (prefers-reduced-motion: reduce) {\n              .grid {\n                transition: opacity var(--datetime-transition);\n                transform: none !important;\n              }\n            }\n\n            /* Grid Cells - Day/Month/Year */\n            .wd {\n              font-size: var(--datetime-font-sm);\n              opacity: var(--datetime-placeholder-opacity);\n              font-weight: 600;\n              padding: var(--datetime-gap) 0;\n              text-transform: uppercase;\n            }\n\n            .day,\n            .month,\n            .year {\n              width: 100%;\n              height: var(--datetime-cell-size);\n            }\n\n            .day.today,\n            .month.today,\n            .year.today {\n              border: var(--datetime-today-border-width) solid var(--datetime-accent);\n              position: relative;\n            }\n\n            .day.in-range {\n              background: var(--datetime-accent);\n              color: var(--datetime-bg);\n              opacity: 0.6;\n            }\n\n            .day.selected,\n            .month.selected,\n            .year.selected,\n            .day.range-start,\n            .day.range-end {\n              background: var(--datetime-accent);\n              color: var(--datetime-bg);\n              opacity: 1;\n            }\n\n            .month,\n            .year {\n              height: 3em;\n            }\n\n            .day:disabled {\n              opacity: var(--datetime-disabled-opacity);\n              cursor: not-allowed;\n            }\n\n            .day.range-hover {\n              background: var(--datetime-focus-shadow);\n            }\n\n            /* Time Picker */\n            .time {\n              gap: var(--datetime-gap);\n              padding: var(--datetime-space-lg) 0;\n            }\n\n            .time-separator {\n              font-size: 1.25em;\n              color: var(--datetime-muted);\n              font-weight: 600;\n            }\n\n            .time-select,\n            .ampm {\n              appearance: none;\n              background-color: var(--datetime-bg);\n              background-image: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 9l4 -4l4 4" /><path d="M16 15l-4 4l-4 -4" /></svg>\');\n              background-position: right var(--datetime-gap) center;\n              background-repeat: no-repeat;\n              background-size: 1em;\n              padding: var(--datetime-gap) 1.75em var(--datetime-gap) var(--datetime-space-lg);\n              font-weight: 500;\n              color: var(--datetime-text);\n              cursor: pointer;\n              min-width: 4em;\n            }\n\n            .time-select:focus,\n            .ampm:focus {\n              outline: none;\n              border-color: var(--datetime-accent);\n              box-shadow: 0 0 0 3px var(--datetime-focus-shadow);\n            }\n\n            /* Quick Dates & Presets */\n            .quick-dates {\n              display: flex;\n              gap: 0.375em;\n              padding: var(--datetime-space-lg) 0;\n              flex-wrap: wrap;\n            }\n\n            .preset {\n              padding: 0.375em var(--datetime-space-lg);\n              border-radius: var(--datetime-radius-xl);\n              color: var(--datetime-muted);\n            }\n\n            /* Action Buttons */\n            .actions {\n              display: flex;\n              gap: var(--datetime-gap);\n              justify-content: space-between;\n              padding-top: var(--datetime-space-lg);\n            }\n\n            .btn {\n              background: var(--datetime-hover);\n              padding: 0.625em 1em;\n              min-height: var(--datetime-cell-size);\n              color: var(--datetime-text);\n            }\n\n            .btn.primary {\n              background: var(--datetime-accent);\n              color: var(--datetime-bg);\n              border-color: var(--datetime-accent);\n            }\n\n            /* Range Info */\n            .range-info {\n              padding: var(--datetime-gap) var(--datetime-gap);\n              margin-bottom: var(--datetime-space-lg);\n              background: var(--datetime-hover);\n              color: var(--datetime-muted);\n              text-align: center;\n            }\n          </style>\n\n          <div class="field">\n            <div class="input" data-datetime-input data-placeholder="Select date..."></div>\n            <div class="input" data-datetime-input-to hidden data-placeholder="End date..."></div>\n            <button type="button" class="calendar-btn" data-datetime-trigger><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z" /><path d="M16 3v4" /><path d="M8 3v4" /><path d="M4 11h16" /><path d="M8 14v4" /><path d="M12 14v4" /><path d="M16 14v4" /></svg></button>\n          </div>\n\n          <div class="panel" data-datetime-panel hidden>\n            <div class="range-info" data-datetime-range-info hidden>Click to select start date, then select end date</div>\n\n            <div class="nav" data-datetime-nav>\n              <button data-datetime-nav-btn="prev"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l14 0" /><path d="M5 12l6 6" /><path d="M5 12l6 -6" /></svg></button>\n              <div class="month-year" data-datetime-month-year>\n                <span data-slot="month"></span>\n                <span data-slot="year"></span>\n                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 9l4 -4l4 4" /><path d="M16 15l-4 4l-4 -4" /></svg>\n              </div>\n              <button data-datetime-nav-btn="next"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l14 0" /><path d="M19 12l-6 6" /><path d="M19 12l-6 -6" /></svg></button>\n            </div>\n\n            <div class="grid-container" data-datetime-grid-container>\n              <div class="grid" data-datetime-grid></div>\n            </div>\n\n            <div class="quick-dates" data-datetime-quick-dates hidden></div>\n\n            <div class="time" data-datetime-time hidden>\n              <select class="time-select" data-datetime-hour></select>\n              <div class="time-separator">:</div>\n              <select class="time-select" data-datetime-minute></select>\n              <select class="ampm" data-datetime-ampm hidden>\n                <option value="AM">AM</option>\n                <option value="PM">PM</option>\n              </select>\n            </div>\n\n            <div class="actions">\n              <button class="btn" data-datetime-action="clear">Clear</button>\n              <button class="btn primary" data-datetime-action="apply">Apply</button>\n            </div>\n          </div>\n        ',this._input=this.shadowRoot.querySelector("[data-datetime-input]"),this._toInput=this.shadowRoot.querySelector("[data-datetime-input-to]"),this._btn=this.shadowRoot.querySelector("[data-datetime-trigger]"),this._panel=this.shadowRoot.querySelector("[data-datetime-panel]"),this._nav=this.shadowRoot.querySelector("[data-datetime-nav]"),this._gridContainer=this.shadowRoot.querySelector("[data-datetime-grid-container]"),this._grid=this.shadowRoot.querySelector("[data-datetime-grid]"),this._month=this.shadowRoot.querySelector('[data-slot="month"]'),this._year=this.shadowRoot.querySelector('[data-slot="year"]'),this._monthYearBtn=this.shadowRoot.querySelector("[data-datetime-month-year]"),this._timeWrap=this.shadowRoot.querySelector("[data-datetime-time]"),this._hourSelect=this.shadowRoot.querySelector("[data-datetime-hour]"),this._minuteSelect=this.shadowRoot.querySelector("[data-datetime-minute]"),this._ampm=this.shadowRoot.querySelector("[data-datetime-ampm]"),this._quickDates=this.shadowRoot.querySelector("[data-datetime-quick-dates]"),this._rangeInfo=this.shadowRoot.querySelector("[data-datetime-range-info]"),this._hidden=null,this._hiddenTo=null,this._currentField="from",this._rangeState=null}connectedCallback(){this._bindEvents(),this._render(),this.name&&this._ensureHidden(),requestAnimationFrame(()=>{this._updateTheme()})}_updateTheme(t=null){const e=t||this.getAttribute("theme");!e||"inherit"===e?this._applyInheritTheme():this._applyNamedTheme(e)}_applyInheritTheme(){this.hasAttribute("theme")||this.setAttribute("theme","inherit");const t=getComputedStyle(this);this.shadowRoot.querySelectorAll("input").forEach(e=>{e.style.setProperty("--datetime-input-color",t.color),e.style.setProperty("--datetime-input-font-size",t.fontSize),e.style.setProperty("--datetime-input-font-family",t.fontFamily)}),this.style.setProperty("--datetime-input-background",t.backgroundColor),this.style.setProperty("--datetime-input-color",t.color),this.style.setProperty("--datetime-input-font-size",t.fontSize),this.style.setProperty("--datetime-input-font-family",t.fontFamily)}_applyNamedTheme(t){"inherit"===this.getAttribute("theme")&&this.removeAttribute("theme"),t&&"inherit"!==t&&this.setAttribute("theme",t)}static get observedAttributes(){return["name","value","mode","time-format","show-quick-dates","quick-dates","range","range-to","from-label","to-label","range-to-value","theme","format"]}attributeChangedCallback(t,e,n){e!==n&&("theme"===t&&this._updateTheme(n),this.isConnected&&this._render())}_bindEvents(){this._btn.addEventListener("click",()=>{this.isRange&&(this._currentField="from",this._rangeState="selecting-from"),this._updateFocusRing(),this.toggle()}),this._input.addEventListener("click",()=>{this.isRange&&(this._currentField="from",this._rangeState="selecting-from"),this._updateFocusRing(),this.open()}),this._toInput.addEventListener("click",()=>{this._currentField="to",this._rangeState="selecting-to",this._updateFocusRing(),this.open()}),this.shadowRoot.querySelectorAll("[data-datetime-nav-btn]").forEach(t=>{t.addEventListener("click",()=>{const e=t.getAttribute("data-datetime-nav-btn");this._handleNavigation(e)})}),this._monthYearBtn.addEventListener("click",()=>{this._handleMonthYearClick()}),this._gridContainer.addEventListener("touchstart",t=>{this._touchStartX=t.changedTouches[0].screenX},{passive:!0}),this._gridContainer.addEventListener("touchend",t=>{this._touchEndX=t.changedTouches[0].screenX,this._handleSwipe()},{passive:!0}),this.shadowRoot.querySelectorAll("[data-datetime-action]").forEach(t=>{t.addEventListener("click",()=>{const e=t.getAttribute("data-datetime-action");"clear"===e?(this.isRange&&"to"===this._currentField?this.rangeToValue="":this.value="",this._emitChange(),this._render()):"apply"===e&&this.close()})}),this._hourSelect.addEventListener("change",()=>this._syncTime()),this._minuteSelect.addEventListener("change",()=>this._syncTime()),this._ampm.addEventListener("change",()=>this._syncTime()),document.addEventListener("click",t=>{this.contains(t.target)||this.close()})}get mode(){return this.getAttribute("mode")||"date"}set mode(t){this.setAttribute("mode",t)}get value(){return this.getAttribute("value")||""}set value(t){t?this.setAttribute("value",t):this.removeAttribute("value")}get name(){return this.getAttribute("name")}set name(t){t?this.setAttribute("name",t):this.removeAttribute("name")}get timeFormat(){return this.getAttribute("time-format")||"24"}set timeFormat(t){this.setAttribute("time-format",t)}get showQuickDates(){return this.hasAttribute("show-quick-dates")}set showQuickDates(t){t?this.setAttribute("show-quick-dates",""):this.removeAttribute("show-quick-dates")}get quickDates(){return this.getAttribute("quick-dates")||"yesterday,today,tomorrow"}set quickDates(t){this.setAttribute("quick-dates",t)}get isRange(){return this.hasAttribute("range")}set isRange(t){t?this.setAttribute("range",""):this.removeAttribute("range")}get rangeTo(){return this.getAttribute("range-to")}set rangeTo(t){t?this.setAttribute("range-to",t):this.removeAttribute("range-to")}get fromLabel(){return this.getAttribute("from-label")||"From"}set fromLabel(t){this.setAttribute("from-label",t)}get toLabel(){return this.getAttribute("to-label")||"To"}set toLabel(t){this.setAttribute("to-label",t)}get rangeToValue(){return this.getAttribute("range-to-value")||""}set rangeToValue(t){t?this.setAttribute("range-to-value",t):this.removeAttribute("range-to-value")}get format(){return this.getAttribute("format")||""}set format(t){t?this.setAttribute("format",t):this.removeAttribute("format")}open(){this._panel.hidden=!1,requestAnimationFrame(()=>{this._panel.classList.add("open")})}close(){this._panel.classList.remove("open"),this._input.classList.remove("is-focused"),this._toInput.classList.remove("is-focused"),setTimeout(()=>{this._panel.hidden=!0},150)}toggle(){this._panel.hidden?this.open():this.close()}_render(){this._renderMode(),this._renderCalendar(),this._renderTime(),this._renderInput(),this._renderQuickDates()}_renderMode(){this.isRange?(this._input.hidden=!1,this._toInput.hidden=!1,this._rangeInfo.hidden=!1,this.value?this.rangeToValue?this._rangeInfo.textContent="Range selected. Click dates to modify.":this._rangeInfo.textContent="Start date selected. Now select end date":this._rangeInfo.textContent="Click to select start date"):(this._input.hidden=!1,this._toInput.hidden=!0,this._rangeInfo.hidden=!0)}_renderCalendar(){const t=this._modeConfig[this.mode];if(this.shadowRoot.querySelector(".nav").hidden=!t.showCalendar,this._gridContainer.hidden=!t.showCalendar,!t.showCalendar)return;const e=this._view.getFullYear(),n=this._view.getMonth();if("year"===this._viewMode){const t=e-5,n=e+6;this._month.textContent=`${t} - ${n}`,this._year.textContent=""}else"month"===this._viewMode?(this._month.textContent=String(e),this._year.textContent=""):(this._month.textContent=new Intl.DateTimeFormat(void 0,{month:"long"}).format(this._view),this._year.textContent=String(e));if(this._navigationDirection&&!this._animating){this._animating=!0;const t=this._grid.cloneNode(!0);t.classList.add("grid--animating",`grid--${this._navigationDirection}`),this._gridContainer.appendChild(t),this._grid.classList.add(`grid--${this._navigationDirection}`,"grid--in"),requestAnimationFrame(()=>{t.classList.add("animating","grid--out"),this._grid.classList.add("animating"),this._grid.classList.remove("grid--in"),setTimeout(()=>{t.remove(),this._grid.classList.remove("animating",`grid--${this._navigationDirection}`),this._animating=!1,this._navigationDirection=null},500)})}if("month"===this._viewMode)return void this._renderMonthPicker();if("year"===this._viewMode)return void this._renderYearPicker();const i=new Date,a=this.value?new Date(this.value):null;this._grid.classList.remove("month-view","year-view");const r=(new Date(e,n,1).getDay()-this._weekStart+7)%7,s=new Date(e,n+1,0).getDate();this._grid.innerHTML="";for(let t=0;t<7;t++){const e=(t+this._weekStart)%7,n=document.createElement("div");n.className="wd",n.textContent=new Intl.DateTimeFormat(void 0,{weekday:"narrow"}).format(new Date(2020,5,e+1)),this._grid.appendChild(n)}for(let t=0;t<r;t++)this._grid.appendChild(document.createElement("div"));for(let t=1;t<=s;t++){const r=new Date(e,n,t),s=document.createElement("button");if(s.className="day",s.textContent=String(t),r.toDateString()===i.toDateString()&&s.classList.add("today"),this.isRange){const t=this.value?new Date(this.value):null,e=this.rangeToValue?new Date(this.rangeToValue):null;t&&r.toDateString()===t.toDateString()&&s.classList.add("range-start"),e&&r.toDateString()===e.toDateString()&&s.classList.add("range-end"),t&&e&&r>t&&r<e&&s.classList.add("in-range")}else a&&r.toDateString()===a.toDateString()&&s.classList.add("selected");s.addEventListener("click",()=>{if(this.isRange){const t="date"===this.mode?new Date(r.getFullYear(),r.getMonth(),r.getDate()).toISOString():(()=>{const t=new Date;return t.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),"datetime"===this.mode&&t.setHours(9,0,0,0),t.toISOString()})();if("to"===this._currentField)this.rangeToValue=t,this.value&&new Date(t)<new Date(this.value)&&(this.rangeToValue=this.value,this.value=t);else{const e=!this.value&&!this.rangeToValue;this.value=t,this.rangeToValue&&new Date(t)>new Date(this.rangeToValue)&&(this.value=this.rangeToValue,this.rangeToValue=t),e&&(this._currentField="to",this._rangeState="selecting-to")}this._emitChange(),this._render(),this._updateFocusRing()}else if("date"===this.mode)this.value=new Date(r.getFullYear(),r.getMonth(),r.getDate()).toISOString(),this._emitChange(),this.close();else{const t=this.value?new Date(this.value):new Date;t.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),this.value=t.toISOString(),this._emitChange(),this._render()}}),this._grid.appendChild(s)}}_handleNavigation(t){this._navigationDirection=t;const e="next"===t?1:-1;({year:()=>this._view.setFullYear(this._view.getFullYear()+12*e),month:()=>this._view.setFullYear(this._view.getFullYear()+e),day:()=>this._view.setMonth(this._view.getMonth()+e)})[this._viewMode](),this._render()}_handlePrevClick(){this._handleNavigation("prev")}_handleNextClick(){this._handleNavigation("next")}_handleMonthYearClick(){"day"===this._viewMode?this._viewMode="month":"month"===this._viewMode&&(this._viewMode="year"),this._render()}_handleSwipe(){const t=this._touchEndX-this._touchStartX;Math.abs(t)<50||(t>0?this._handlePrevClick():this._handleNextClick())}_renderMonthPicker(){const t=this._view.getFullYear(),e=this.value?new Date(this.value):null,n=new Date;this._grid.innerHTML="",this._grid.classList.add("month-view"),this._grid.classList.remove("year-view");for(let i=0;i<12;i++){const a=new Date(t,i,1),r=document.createElement("button");r.className="month",r.textContent=new Intl.DateTimeFormat(void 0,{month:"short"}).format(a),a.getMonth()===n.getMonth()&&a.getFullYear()===n.getFullYear()&&r.classList.add("today"),e&&a.getMonth()===e.getMonth()&&a.getFullYear()===e.getFullYear()&&r.classList.add("selected"),r.addEventListener("click",()=>{this._view.setMonth(i),this._viewMode="day",this._render()}),this._grid.appendChild(r)}}_renderYearPicker(){const t=this._view.getFullYear(),e=this.value?new Date(this.value):null,n=new Date;this._grid.innerHTML="",this._grid.classList.add("year-view"),this._grid.classList.remove("month-view");const i=t-5;for(let t=0;t<12;t++){const a=i+t,r=document.createElement("button");r.className="year",r.textContent=String(a),a===n.getFullYear()&&r.classList.add("today"),e&&a===e.getFullYear()&&r.classList.add("selected"),r.addEventListener("click",()=>{this._view.setFullYear(a),this._viewMode="month",this._render()}),this._grid.appendChild(r)}}_renderTime(){const t="datetime"===this.mode||"time"===this.mode;if(this._timeWrap.hidden=!t,!t)return;"time"===this.mode?(this._timeWrap.style.borderTop="none",this._timeWrap.style.paddingTop="0"):(this._timeWrap.style.borderTop="",this._timeWrap.style.paddingTop="");const e="12"===this.timeFormat;this._ampm.hidden=!e,this._hourSelect.innerHTML="";const n=e?12:24,i=e?1:0;for(let t=i;t<(e?i+12:n);t++){const e=document.createElement("option");e.value=t,e.textContent=String(t).padStart(2,"0"),this._hourSelect.appendChild(e)}this._minuteSelect.innerHTML="";const a=this._step||15;for(let t=0;t<60;t+=a){const e=document.createElement("option");e.value=t,e.textContent=String(t).padStart(2,"0"),this._minuteSelect.appendChild(e)}let r;if(r=this.isRange&&"to"===this._currentField?this.rangeToValue:this.value,r){const t=new Date(r);if(e){let e=t.getHours();this._ampm.value=e>=12?"PM":"AM",e=e%12||12,this._hourSelect.value=e}else this._hourSelect.value=t.getHours();const n=t.getMinutes(),i=Math.round(n/a)*a;this._minuteSelect.value=i>=60?0:i}}_renderInput(){let t;if(t="date"===this.mode?{dateStyle:"medium"}:"time"===this.mode?{timeStyle:"short"}:{dateStyle:"medium",timeStyle:"short"},this.isRange){if(this.value){const e=new Date(this.value);this._input.textContent=new Intl.DateTimeFormat(void 0,t).format(e)}else{this._input.textContent="";const t="date"===this.mode?"Start date...":"time"===this.mode?"Start time...":"Start date & time...";this._input.setAttribute("data-placeholder",t)}if(this.rangeToValue){const e=new Date(this.rangeToValue);this._toInput.textContent=new Intl.DateTimeFormat(void 0,t).format(e)}else{this._toInput.textContent="";const t="date"===this.mode?"End date...":"time"===this.mode?"End time...":"End date & time...";this._toInput.setAttribute("data-placeholder",t)}}else if(this.value){const e=new Date(this.value);this._input.textContent=new Intl.DateTimeFormat(void 0,t).format(e)}else{this._input.textContent="";const t="date"===this.mode?"Select date...":"time"===this.mode?"Select time...":"Select date & time...";this._input.setAttribute("data-placeholder",t)}}_renderQuickDates(){const t=this.showQuickDates&&"time"!==this.mode;if(this._quickDates.hidden=!t,t){const t=this.quickDates.split(",").map(t=>t.trim()),e={yesterday:{days:-1,label:"Yesterday"},today:{days:0,label:"Today"},tomorrow:{days:1,label:"Tomorrow"}};this._quickDates.innerHTML="",t.forEach(t=>{if(e[t]){const n=document.createElement("button");n.className="preset",n.textContent=e[t].label,n.addEventListener("click",()=>{const n=new Date;n.setDate(n.getDate()+e[t].days),"date"===this.mode?this.value=new Date(n.getFullYear(),n.getMonth(),n.getDate()).toISOString():(n.setHours(9,0,0,0),this.value=n.toISOString()),this._viewMode="day",this._view=new Date(n),this._emitChange(),this._render(),"date"===this.mode&&this.close()}),this._quickDates.appendChild(n)}})}}_syncTime(){if("datetime"!==this.mode&&"time"!==this.mode)return;let t;t=this.isRange&&"to"===this._currentField?this.rangeToValue?new Date(this.rangeToValue):new Date:this.value?new Date(this.value):new Date;let e=parseInt(this._hourSelect.value)||0;const n=parseInt(this._minuteSelect.value)||0;if("12"===this.timeFormat){const t=this._ampm.value;"PM"===t&&12!==e&&(e+=12),"AM"===t&&12===e&&(e=0)}t.setHours(e,n,0,0),this.isRange&&"to"===this._currentField?this.rangeToValue=t.toISOString():this.value=t.toISOString(),this._emitChange(),this._renderInput()}_formatDate(t){if(!t||!this.format)return t;const e=new Date(t);if(isNaN(e.getTime()))return t;let n={iso:"yyyy-mm-dd","iso-tz":"yyyy-mm-ddThh:ii:sstzz","iso-datetime":"yyyy-mm-dd hh:ii:ss","iso-datetime-tz":"yyyy-mm-dd hh:ii:ss tz","us-date":"mm/dd/yyyy","us-datetime":"mm/dd/yyyy hh:ii:ss","us-datetime-tz":"mm/dd/yyyy hh:ii:ss tz","eu-date":"dd/mm/yyyy","eu-datetime":"dd/mm/yyyy hh:ii:ss","eu-datetime-tz":"dd/mm/yyyy hh:ii:ss tz",mysql:"yyyy-mm-dd hh:ii:ss"}[this.format]||this.format;const i=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0"),d=String(e.getSeconds()).padStart(2,"0");return n.replace(/yyyy/g,i).replace(/mm/g,a).replace(/dd/g,r).replace(/hh/g,s).replace(/ii/g,o).replace(/ss/g,d).replace(/tzz/g,(()=>{const t=-e.getTimezoneOffset(),n=t>=0?"+":"-",i=Math.abs(t);return`${n}${String(Math.floor(i/60)).padStart(2,"0")}${String(i%60).padStart(2,"0")}`})()).replace(/tz/g,(()=>{const t=-e.getTimezoneOffset(),n=t>=0?"+":"-",i=Math.abs(t);return`${n}${String(Math.floor(i/60)).padStart(2,"0")}:${String(i%60).padStart(2,"0")}`})())}_ensureHidden(){this._hidden||(this._hidden=document.createElement("input"),this._hidden.type="hidden",this.appendChild(this._hidden)),this._hidden.name=this.name,this._hidden.value=this.format?this._formatDate(this.value):this.value,this.isRange&&this.rangeTo&&(this._hiddenTo||(this._hiddenTo=document.createElement("input"),this._hiddenTo.type="hidden",this.appendChild(this._hiddenTo)),this._hiddenTo.name=this.rangeTo,this._hiddenTo.value=this.format?this._formatDate(this.rangeToValue):this.rangeToValue)}_updateFocusRing(){this._input.classList.remove("is-focused"),this._toInput.classList.remove("is-focused"),this.isRange&&"to"===this._currentField?this._toInput.classList.add("is-focused"):this._input.classList.add("is-focused")}_emitChange(){this._hidden&&(this._hidden.value=this.format?this._formatDate(this.value):this.value),this._hiddenTo&&(this._hiddenTo.value=this.format?this._formatDate(this.rangeToValue):this.rangeToValue);const t=this.isRange?{value:this.value,toValue:this.rangeToValue,from:this.value,to:this.rangeToValue}:{value:this.value};this.dispatchEvent(new CustomEvent("change",{detail:t}))}}customElements.define("p-datetime",t);export{t as default};
