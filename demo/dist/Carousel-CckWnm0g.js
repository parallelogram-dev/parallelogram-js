import{B as t}from"./index.esm-BW_QP_AR.js";class e extends t{static get defaults(){return{autoplayDelay:5e3,loop:!0,showDots:!0,showArrows:!0,slideSelector:"[data-carousel-slide]",trackSelector:"[data-carousel-track]",swipeThreshold:50,transitionDuration:300,pauseOnHover:!0,keyboardNavigation:!0}}_init(t){const a=super._init(t),s=this._getDataAttr(t,"carousel-autoplay-delay",e.defaults.autoplayDelay),l=this._getDataAttr(t,"carousel-loop",e.defaults.loop),r=this._getDataAttr(t,"carousel-show-dots",e.defaults.showDots),i=this._getDataAttr(t,"carousel-show-arrows",e.defaults.showArrows),o=this._getDataAttr(t,"carousel-pause-on-hover",e.defaults.pauseOnHover),n=this._getDataAttr(t,"carousel-keyboard",e.defaults.keyboardNavigation),u=t.querySelector(e.defaults.trackSelector),c=t.querySelectorAll(e.defaults.slideSelector);return u&&0!==c.length?(a.currentSlide=0,a.totalSlides=c.length,a.autoplayDelay=s,a.loop=l,a.track=u,a.slides=Array.from(c),a.autoplayTimer=null,a.isPlaying=s>0,t.setAttribute("role","region"),t.setAttribute("aria-label","Carousel"),u.setAttribute("aria-live","polite"),c.forEach((t,e)=>{t.setAttribute("role","group"),t.setAttribute("aria-roledescription","slide"),t.setAttribute("aria-label",`${e+1} of ${c.length}`),t.setAttribute("aria-hidden",0===e?"false":"true")}),i&&this._createArrows(t,a),r&&this._createDots(t,a),this._setupEventListeners(t,a,{pauseOnHover:o,keyboardNavigation:n}),a.isPlaying&&this._startAutoplay(a),this._updateSlidePosition(t,a),this.logger?.info("Carousel initialized",{element:t,totalSlides:a.totalSlides,autoplayDelay:s,loop:l}),a):(this.logger?.warn("Carousel: No track or slides found",t),a)}goToSlide(t,e){const a=this.getState(t);if(!a)return;const s=this._validateSlideIndex(e,a);s!==a.currentSlide&&(a.currentSlide=s,this._updateSlidePosition(t,a),this._restartAutoplay(a),this._dispatch(t,"carousel:slide-change",{currentSlide:a.currentSlide,totalSlides:a.totalSlides}))}next(t){const e=this.getState(t);if(!e)return;let a=e.currentSlide+1;a>=e.totalSlides&&(a=e.loop?0:e.totalSlides-1),this.goToSlide(t,a)}previous(t){const e=this.getState(t);if(!e)return;let a=e.currentSlide-1;a<0&&(a=e.loop?e.totalSlides-1:0),this.goToSlide(t,a)}play(t){const e=this.getState(t);e&&(e.isPlaying=!0,this._startAutoplay(e),this._dispatch(t,"carousel:play",{}))}pause(t){const e=this.getState(t);e&&(e.isPlaying=!1,this._stopAutoplay(e),this._dispatch(t,"carousel:pause",{}))}_createArrows(t,e){const a=document.createElement("button");a.className="carousel__arrow carousel__arrow--prev",a.setAttribute("aria-label","Previous slide"),a.innerHTML="←";const s=document.createElement("button");s.className="carousel__arrow carousel__arrow--next",s.setAttribute("aria-label","Next slide"),s.innerHTML="→",t.appendChild(a),t.appendChild(s),e.prevButton=a,e.nextButton=s,a.addEventListener("click",()=>this.previous(t),{signal:e.controller.signal}),s.addEventListener("click",()=>this.next(t),{signal:e.controller.signal})}_createDots(t,e){const a=document.createElement("div");a.className="carousel__dots",a.setAttribute("role","tablist"),a.setAttribute("aria-label","Carousel navigation"),e.dots=[];for(let s=0;s<e.totalSlides;s++){const l=document.createElement("button");l.className="carousel__dot",l.setAttribute("role","tab"),l.setAttribute("aria-label",`Go to slide ${s+1}`),l.setAttribute("aria-controls",`slide-${s}`),0===s?(l.classList.add("active"),l.setAttribute("aria-selected","true")):l.setAttribute("aria-selected","false"),l.addEventListener("click",()=>this.goToSlide(t,s),{signal:e.controller.signal}),a.appendChild(l),e.dots.push(l)}t.appendChild(a),e.dotsContainer=a}_setupEventListeners(t,e,a){a.pauseOnHover&&(t.addEventListener("mouseenter",()=>this._stopAutoplay(e),{signal:e.controller.signal}),t.addEventListener("mouseleave",()=>{e.isPlaying&&this._startAutoplay(e)},{signal:e.controller.signal})),a.keyboardNavigation&&t.addEventListener("keydown",a=>{switch(a.key){case"ArrowLeft":a.preventDefault(),this.previous(t);break;case"ArrowRight":a.preventDefault(),this.next(t);break;case" ":a.preventDefault(),e.isPlaying?this.pause(t):this.play(t)}},{signal:e.controller.signal}),this._setupTouchEvents(t,e)}_setupTouchEvents(t,a){let s=0,l=0,r=!1;t.addEventListener("touchstart",t=>{const e=t.touches[0];s=e.clientX,l=e.clientY,r=!0,this._stopAutoplay(a)},{passive:!0,signal:a.controller.signal}),t.addEventListener("touchmove",t=>{if(!r)return;const e=t.touches[0],a=e.clientX-s,i=e.clientY-l;Math.abs(a)>Math.abs(i)&&t.preventDefault()},{passive:!1,signal:a.controller.signal}),t.addEventListener("touchend",l=>{if(!r)return;r=!1;const i=l.changedTouches[0].clientX-s;Math.abs(i)>e.defaults.swipeThreshold&&(i>0?this.previous(t):this.next(t)),a.isPlaying&&this._startAutoplay(a)},{passive:!0,signal:a.controller.signal})}_updateSlidePosition(t,e){e.slides.forEach((t,a)=>{t.setAttribute("aria-hidden",a===e.currentSlide?"false":"true"),a===e.currentSlide?t.classList.add("carousel__slide--active"):t.classList.remove("carousel__slide--active")});const a=-100*e.currentSlide;e.track.style.transform=`translateX(${a}%)`,e.dots&&e.dots.forEach((t,a)=>{const s=a===e.currentSlide;s?t.classList.add("carousel__dot--active"):t.classList.remove("carousel__dot--active"),t.setAttribute("aria-selected",s?"true":"false")}),e.prevButton&&e.nextButton&&!e.loop&&(e.prevButton.disabled=0===e.currentSlide,e.nextButton.disabled=e.currentSlide===e.totalSlides-1)}_startAutoplay(t){this._stopAutoplay(t),t.autoplayDelay>0&&(t.autoplayTimer=setTimeout(()=>{this.next(t.track.closest("[data-carousel]"))},t.autoplayDelay))}_stopAutoplay(t){t.autoplayTimer&&(clearTimeout(t.autoplayTimer),t.autoplayTimer=null)}_restartAutoplay(t){t.isPlaying&&this._startAutoplay(t)}_validateSlideIndex(t,e){return Math.max(0,Math.min(t,e.totalSlides-1))}unmount(t){const e=this.getState(t);e&&this._stopAutoplay(e),super.unmount(t)}static enhanceAll(t="[data-carousel]",a){const s=new e(a);return document.querySelectorAll(t).forEach(t=>{s.mount(t)}),s}}export{e as default};
