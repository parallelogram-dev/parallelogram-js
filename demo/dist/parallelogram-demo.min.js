class e{constructor(e={}){this.basePath=e.basePath||"../components/",this.defaultPriority=e.defaultPriority||"normal",this.fileExtension=e.fileExtension||".js",this.useMinified=e.useMinified||!1,this.registry=[]}component(e,t,n={}){if(!n.loader)throw new Error(`Component '${e}' must provide a loader function`);const r={name:e,selector:t,priority:n.priority||this.defaultPriority,dependsOn:n.dependsOn,loader:n.loader};return this.registry.push(r),this}toPascalCase(e){return e.split(/[-_\s]+/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join("")}build(){return[...this.registry]}clear(){return this.registry=[],this}getStats(){const e=this.registry.reduce((e,t)=>(e[t.priority]=(e[t.priority]||0)+1,e),{}),t=this.registry.filter(e=>e.dependsOn?.length>0).length;return{totalComponents:this.registry.length,priorities:e,withDependencies:t,basePath:this.basePath}}validate(){const e=new Set(this.registry.map(e=>e.name)),t=[],n=[];this.registry.forEach(n=>{n.dependsOn&&n.dependsOn.forEach(r=>{e.has(r)||t.push(`Component '${n.name}' depends on '${r}' which is not in the registry`)})});const r=this.detectCycles();r.length>0&&t.push(`Circular dependencies detected: ${r.join(", ")}`);const o=new Map;return this.registry.forEach(e=>{o.has(e.selector)?n.push(`Duplicate selector '${e.selector}' used by '${e.name}' and '${o.get(e.selector)}'`):o.set(e.selector,e.name)}),{valid:0===t.length,errors:t,warnings:n}}detectCycles(){const e=new Set,t=new Set,n=[],r=(o,s=[])=>{if(t.has(o)){const e=s.indexOf(o);return void n.push(s.slice(e).concat(o).join(" -> "))}if(e.has(o))return;e.add(o),t.add(o);const i=this.registry.find(e=>e.name===o);i?.dependsOn&&i.dependsOn.forEach(e=>{r(e,[...s,o])}),t.delete(o)};return this.registry.forEach(t=>{e.has(t.name)||r(t.name)}),n}fork(t={}){return new e({basePath:this.basePath,defaultPriority:this.defaultPriority,fileExtension:this.fileExtension,useMinified:this.useMinified,...t})}static create(t="dev",n={}){const r={...{dev:{basePath:"/dist/esm/components/",useMinified:!1,fileExtension:".js"},production:{basePath:"/dist/esm/components/",useMinified:!0,fileExtension:".js"},custom:{}}[t],...n};return new e(r)}}class t{constructor(e,t=!1){this.namespace=e,this.enabled=t}setEnabled(e){this.enabled=Boolean(e)}_getPrefix(e){return`${(new Date).toISOString()} [${this.namespace}] ${e}:`}debug(...e){this.enabled&&console.debug(this._getPrefix("DEBUG"),...e)}log(...e){this.enabled&&console.log(this._getPrefix("LOG"),...e)}info(...e){this.enabled&&console.info(this._getPrefix("INFO"),...e)}warn(...e){this.enabled&&console.warn(this._getPrefix("WARN"),...e)}error(...e){console.error(this._getPrefix("ERROR"),...e)}child(e){return new t(`${this.namespace}:${e}`,this.enabled)}group(e,t){this.enabled&&console.groupCollapsed&&(console.groupCollapsed(`[${this.namespace}] ${e}`),t&&"object"==typeof t&&console.log("Details:",t))}groupEnd(){this.enabled&&console.groupEnd&&console.groupEnd()}}class n{constructor(e={},t={}){this.componentMap=e,this.options={eager:t.eager??!0,observeDOM:t.observeDOM??!1,rootElement:t.rootElement??document.documentElement,onLoad:t.onLoad??null,onError:t.onError??null},this.loadedComponents=new Set,this.loadingComponents=new Map,this.observer=null}init(){this.options.eager&&this.scanAndLoad(),this.options.observeDOM&&this.startObserving()}scanAndLoad(e=this.options.rootElement){Object.keys(this.componentMap).forEach(t=>{if(!this.loadedComponents.has(t)){e.querySelectorAll(t).length>0&&this.loadComponent(t)}})}async loadComponent(e){if(this.loadedComponents.has(e))return;if(this.loadingComponents.has(e))return this.loadingComponents.get(e);if(!this.componentMap[e])return void console.warn(`[WebComponentLoader] No loader defined for component: ${e}`);const t=this.componentMap[e]().then(()=>{this.loadedComponents.add(e),this.loadingComponents.delete(e),this.options.onLoad&&this.options.onLoad(e)}).catch(t=>{this.loadingComponents.delete(e),this.options.onError?this.options.onError(e,t):console.error(`[WebComponentLoader] Failed to load component: ${e}`,t)});return this.loadingComponents.set(e,t),t}startObserving(){this.observer||(this.observer=new MutationObserver(e=>{const t=new Set;e.forEach(e=>{e.addedNodes.forEach(e=>{e.nodeType===Node.ELEMENT_NODE&&t.add(e)})}),t.forEach(e=>{Object.keys(this.componentMap).forEach(t=>{this.loadedComponents.has(t)||(e.tagName?.toLowerCase()===t||e.querySelector&&e.querySelector(t))&&this.loadComponent(t)})})}),this.observer.observe(this.options.rootElement,{childList:!0,subtree:!0}))}stopObserving(){this.observer&&(this.observer.disconnect(),this.observer=null)}register(e,t){this.componentMap[e]=t}unregister(e){delete this.componentMap[e]}isLoaded(e){return this.loadedComponents.has(e)}isLoading(e){return this.loadingComponents.has(e)}destroy(){this.stopObserving(),this.loadedComponents.clear(),this.loadingComponents.clear()}}class r{constructor(){this.listeners=new Map}on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set);return this.listeners.get(e).add(t),()=>this.off(e,t)}once(e,t){const n=this.on(e,e=>{n(),t(e)});return n}off(e,t){const n=this.listeners.get(e);n&&(n.delete(t),0===n.size&&this.listeners.delete(e))}emit(e,t){const n=this.listeners.get(e);if(!n)return;const r=[...n];for(const n of r)try{n(t)}catch(t){console.error(`[EventManager] Error in listener for "${e}":`,t)}}clear(e){e?this.listeners.delete(e):this.listeners.clear()}}class o{constructor({eventBus:e,logger:t,options:n={}}){this.eventBus=e,this.logger=t,this.options={baseUrl:"",timeout:1e4,retryAttempts:0,fragmentSelector:"[data-router-fragment]",loadingClass:"router-loading",errorClass:"router-error",...n},this.controller=null,this.currentUrl=new URL(location.href),this.isNavigating=!1,this.boundPopState=this._onPopState.bind(this),this.boundLinkClick=this._onLinkClick.bind(this),this._initialize()}_initialize(){this.logger?.info("RouterManager initializing"),window.addEventListener("popstate",this.boundPopState),window.addEventListener("pageshow",e=>{e.persisted&&this.eventBus.emit("router:bfcache-restore",{url:this.currentUrl})}),window.addEventListener("pagehide",()=>{this.eventBus.emit("router:bfcache-store",{url:this.currentUrl})}),this._enhanceLinks(),this.eventBus.on("dom:content-loaded",()=>{this._enhanceLinks()}),this.eventBus.emit("router:initialized",{currentUrl:this.currentUrl})}_enhanceLinks(){document.querySelectorAll("a[href]:not([data-router-enhanced])").forEach(e=>{this._shouldEnhanceLink(e)&&(e.addEventListener("click",this.boundLinkClick),e.setAttribute("data-router-enhanced","true"),this.logger?.debug("Enhanced link",{href:e.href}))})}_shouldEnhanceLink(e){const t=e.getAttribute("href");if(!t||t.startsWith("mailto:")||t.startsWith("tel:")||t.startsWith("javascript:"))return!1;if(e.hasAttribute("data-router-skip"))return!1;try{if(new URL(t,location.href).origin!==location.origin&&!e.hasAttribute("data-router-enhance"))return!1}catch{return!1}return!0}_onLinkClick(e){if(e.ctrlKey||e.metaKey||e.shiftKey||e.altKey)return;if(2===e.which)return;const t=e.currentTarget,n=t.getAttribute("href"),r=t.getAttribute("data-view-target")||"main",o=t.closest("[data-router-immutable-url]"),s=t.hasAttribute("data-router-immutable-url")?"false"!==t.getAttribute("data-router-immutable-url"):!!o&&"false"!==o.getAttribute("data-router-immutable-url");try{const o=new URL(n,location.href);if(o.pathname===location.pathname&&o.hash)return;e.preventDefault(),this.navigate(o,{viewTarget:r,replace:t.hasAttribute("data-router-replace"),immutableUrl:s,trigger:"link-click",element:t})}catch(e){this.logger?.error("Failed to parse link URL",{href:n,error:e})}}_onPopState(e){const t=new URL(location.href);this.currentUrl=t,this.eventBus.emit("router:popstate",{url:t,state:e.state,trigger:"popstate"})}async get(e,t={}){const n="string"==typeof e?e:e.toString();this.logger?.group(`RouterManager GET ${n}`),this._abortInFlight();const r=new AbortController;this.controller=r;const o=setTimeout(()=>{r.abort()},this.options.timeout);try{const e=await fetch(n,{method:"GET",signal:r.signal,credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/html,application/json,*/*",...t.headers},...t});if(clearTimeout(o),!e.ok)throw this._createHttpError(e);const s=e.headers.get("content-type")||"";let i;return i=s.includes("application/json")?await e.json():await e.text(),this.logger?.info("GET successful",{url:n,status:e.status,contentType:s}),{response:e,data:i}}catch(e){if(clearTimeout(o),"AbortError"===e.name)throw this.logger?.warn("GET aborted",{url:n}),e;throw this.logger?.error("GET failed",{url:n,error:e}),e}finally{this.logger?.groupEnd(),this.controller=null}}async navigate(e,t={}){const{replace:n=!1,trigger:r="programmatic",element:o=null,force:s=!1,immutableUrl:i=!1}=t,a="string"==typeof e?new URL(e,location.href):e,l=a.toString();if(s||l!==this.currentUrl.toString())if(this.isNavigating)this.logger?.warn("Navigation in progress, aborting new navigation",{url:l});else{this.isNavigating=!0,this.currentUrl=a,this.eventBus.emit("router:navigate-start",{url:a,trigger:r,element:o,replace:n}),o&&o.classList.add(this.options.loadingClass),document.body.classList.add(this.options.loadingClass);try{const{data:e}=await this.get(l);if("string"!=typeof e)throw new Error("Expected HTML string response for navigation");if(!i){const e={timestamp:Date.now(),trigger:r};n?history.replaceState(e,"",l):history.pushState(e,"",l)}return this.eventBus.emit("router:navigate-success",{url:a,html:e,trigger:r,element:o,replace:n,viewTarget:t.viewTarget,immutableUrl:i}),this.logger?.info("Navigation successful",{url:l,trigger:r,replace:n,immutableUrl:i}),e}catch(e){throw o&&o.classList.add(this.options.errorClass),document.body.classList.add(this.options.errorClass),this.eventBus.emit("router:navigate-error",{url:a,error:e,trigger:r,element:o}),this.logger?.error("Navigation failed",{url:l,error:e,trigger:r}),e}finally{o&&o.classList.remove(this.options.loadingClass,this.options.errorClass),document.body.classList.remove(this.options.loadingClass,this.options.errorClass),this.isNavigating=!1,this.eventBus.emit("router:navigate-end",{url:a,trigger:r})}}else this.logger?.debug("Navigation skipped - same URL",{url:l})}back(){this.logger?.info("Navigating back"),history.back()}forward(){this.logger?.info("Navigating forward"),history.forward()}getCurrentUrl(){return this.currentUrl}isNavigating(){return this.isNavigating}_abortInFlight(){this.controller&&(this.controller.abort(),this.controller=null)}_createHttpError(e){const t=new Error(`HTTP ${e.status} ${e.statusText}`);return t.name="HttpError",t.status=e.status,t.statusText=e.statusText,t.response=e,t.url=e.url,t}destroy(){this.logger?.info("RouterManager destroying"),window.removeEventListener("popstate",this.boundPopState),document.querySelectorAll("a[data-router-enhanced]").forEach(e=>{e.removeEventListener("click",this.boundLinkClick),e.removeAttribute("data-router-enhanced")}),this._abortInFlight(),this.eventBus.off("dom:content-loaded"),this.eventBus.emit("router:destroyed",{}),this.logger?.info("RouterManager destroyed")}}function s(e){return e.replace(/-([a-z])/g,e=>e[1].toUpperCase())}function i(e="elem"){return`${e}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}function a(e,t=300){let n;return function(...r){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e.apply(this,r)},t)}}function l(e=document){return Array.from(e.querySelectorAll(["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"]):not([disabled])'].join(",")))}function c(e,t){const n=l(e);if(!n.length)return;const r=n[0],o=n[n.length-1],s=e.contains(document.activeElement)?document.activeElement:null;!t.shiftKey||s!==r&&s?t.shiftKey||s!==o||(r.focus(),t.preventDefault()):(o.focus(),t.preventDefault())}function u(e,t={},n=""){const r=document.createElement(e);for(const[e,n]of Object.entries(t))"className"===e||"class"===e?r.className=n:"style"===e&&"object"==typeof n?Object.assign(r.style,n):"dataset"===e&&"object"==typeof n?Object.assign(r.dataset,n):r.setAttribute(e,n);return"string"==typeof n?r.textContent=n:n instanceof HTMLElement&&r.appendChild(n),r}class d{constructor({eventBus:e,logger:t,router:n}){this.eventBus=e,this.logger=t,this.router=n,this.elements=new WeakMap,this.states=this.elements,this._keys=null}mount(e){if(this.elements.has(e))return this.update(e);const t=this._init(e);this.elements.set(e,t)}update(e){}unmount(e){const t=this.elements.get(e);if(t)try{t.cleanup?.()}finally{this.elements.delete(e)}}destroy(){for(const e of this._elementsKeys())this.unmount(e)}_elementsKeys(){return this._keys||(this._keys=new Set),this._keys}_track(e){this._keys||(this._keys=new Set),this._keys.add(e)}_untrack(e){this._keys?.delete(e)}_init(e){const t=new AbortController;return this._track(e),{cleanup:()=>{t.abort(),this._untrack(e)},controller:t}}getState(e){return this.elements.get(e)}_getDataAttr(e,t,n){return function(e,t,n){const r=t.includes("-")?s(t):t,o=e.dataset[r];return void 0===o?n:"true"===o||"false"!==o&&(isNaN(o)||""===o?o:Number(o))}(e,t,n)}_camelCase(e){return s(e)}_debounce(e,t=300){return a(e,t)}_throttle(e,t=100){return function(e,t=100){let n;return function(...r){n||(e.apply(this,r),n=!0,setTimeout(()=>{n=!1},t))}}(e,t)}_delay(e){return function(e){return new Promise(t=>setTimeout(t,e))}(e)}_getTargetElement(e,t,n={}){const r=`${t}-view`,o=this._getDataAttr(e,r);if(o){const t=document.querySelector(`[data-view="${o}"]`);return!t&&n.required&&this.logger?.warn(`Target element with data-view="${o}" not found`,{viewName:o,element:e,attribute:r}),t}const s=this._getDataAttr(e,t);if(!s)return n.required&&this.logger?.warn(`No ${t} or ${r} attribute found`,e),null;const i=document.querySelector(s);return!i&&n.required&&this.logger?.warn("Target element not found",{selector:s,element:e}),i}_getConfigFromAttrs(e,t){const n={};for(const[r,o]of Object.entries(t)){const t=this.constructor.defaults?.[r];n[r]=this._getDataAttr(e,o,t)}return n}_requireState(e,t="method"){const n=this.getState(e);return n||this.logger?.warn(`${t}: No state found for element`,e),n}_generateId(e="elem"){return i(e)}async _waitForTransition(e,t=2e3){return async function(e,t=2e3){return new Promise(n=>{const r=()=>{e.removeEventListener("animationend",r),e.removeEventListener("transitionend",r),n()};e.addEventListener("animationend",r,{once:!0}),e.addEventListener("transitionend",r,{once:!0}),setTimeout(()=>{e.removeEventListener("animationend",r),e.removeEventListener("transitionend",r),n()},t)})}(e,t)}async _fadeIn(e,t=300){return async function(e,t=300){return e.style.opacity="0",e.style.transition=`opacity ${t}ms ease-in-out`,e.offsetHeight,e.style.opacity="1",new Promise(n=>{setTimeout(()=>{e.style.transition="",n()},t)})}(e,t)}async _fadeOut(e,t=300){return async function(e,t=300){return e.style.opacity="1",e.style.transition=`opacity ${t}ms ease-in-out`,e.offsetHeight,e.style.opacity="0",new Promise(n=>{setTimeout(()=>{e.style.transition="",n()},t)})}(e,t)}_getFocusableElements(e=document){return l(e)}_trapFocus(e,t){return c(e,t)}_restoreFocus(e){return function(e){e&&"function"==typeof e.focus&&requestAnimationFrame(()=>e.focus())}(e)}_createElement(e,t={},n=""){return u(e,t,n)}_dispatch(e,t,n){const r=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0});return e.dispatchEvent(r),this.eventBus?.emit(t,{element:e,...n}),r}}class h extends d{constructor(e,t){super({eventBus:{on(){},emit(){}},logger:{info(){},error(){},enabled:!1},router:null}),this._onMount=e,this._onUnmount=t}mount(e){this._onMount(e)}unmount(e){this._onUnmount(e)}}class m{constructor({containerSelector:e,registry:t,eventBus:n,logger:r,router:o,options:s={}}){this.eventBus=n,this.logger=r,this.router=o,this.containerSelector=e,this.registry=t,this.options={mountDelay:1200,scrollRestoration:!0,scrollPosition:"top",scrollElement:null,lazyLoadThreshold:"100px",retryFailedLoads:!0,maxRetryAttempts:3,batchUpdates:!0,updateThrottleMs:16,trackPerformance:!1,targetGroups:{main:["main","menubar","breadcrumb"],panel:["panel"],sidebar:["sidebar","toolbar"],modal:["modal"]},...s},this.instances=new Map,this.observer=null,this.loadingPromises=new Map,this.retryCount=new Map,this.performanceMetrics={fragmentReplacements:0,componentMounts:0,componentUnmounts:0,totalMountTime:0,averageMountTime:0},this.sessionTracking={componentsLoaded:new Set,loadHistory:[],mountCount:new Map,lastMountTime:new Map},this.throttledUpdate=this._createThrottledFunction(this._processBatchedUpdates.bind(this),this.options.updateThrottleMs),this.pendingUpdates=[],this._initialize()}_initialize(){this.logger?.info("PageManager initializing",{containerSelector:this.containerSelector,registrySize:this.registry.length}),this.eventBus.on("router:navigate-success",({html:e,url:t,trigger:n,viewTarget:r,viewTargets:o})=>{const s=this._resolveTargetGroups(o||[r||"main"]);this.replaceFragments(e,{fromNavigation:!0,url:t,trigger:n,viewTargets:s,preserveScroll:"popstate"===n&&"preserve"===this.options.scrollPosition})}),this.eventBus.on("router:popstate",async({url:e})=>{try{this.logger?.info("Handling popstate navigation",{url:e.toString()});const{data:t}=await this.router.get(e.toString());if("string"==typeof t){const n=this._resolveTargetGroups(["main"]);this.replaceFragments(t,{fromPopstate:!0,url:e,viewTargets:n,preserveScroll:"preserve"===this.options.scrollPosition})}}catch(t){this.logger?.error("Popstate fetch failed",{url:e.toString(),error:t}),this.eventBus.emit("page:popstate-error",{url:e,error:t})}}),this.eventBus.on("component:lazy-load",({element:e,componentName:t})=>{this._handleLazyLoad(e,t)}),this._initialMount(),this.eventBus.emit("page-manager:initialized",{containerSelector:this.containerSelector,options:this.options})}get container(){const e=document.querySelector(this.containerSelector);if(!e){const e=new Error(`Container not found: ${this.containerSelector}`);throw this.logger?.error("Container element not found",{selector:this.containerSelector}),e}return e}_resolveTargetGroups(e){const t=new Set;for(const n of e)if(this.options.targetGroups[n]){for(const e of this.options.targetGroups[n])t.add(e);this.logger?.info(`Resolved target group '${n}' to:`,this.options.targetGroups[n])}else t.add(n),this.logger?.debug(`Using target '${n}' directly (no group defined)`);const n=Array.from(t);return this.logger?.info("Final resolved targets:",n),n}async replaceFragments(e,t={}){const{fromNavigation:n=!1,fromPopstate:r=!1,preserveScroll:o=!1,url:s=null,trigger:i="unknown",viewTargets:a=["main"]}=t,l=this.options.trackPerformance?performance.now():0;this.logger?.group("Multiple fragments replacement",{fromNavigation:n,fromPopstate:r,preserveScroll:o,url:s?.toString(),trigger:i,viewTargets:a});try{let n=null;o?n={x:window.scrollX,y:window.scrollY}:"top"!==this.options.scrollPosition||r||window.scrollTo(0,0);const s=(new DOMParser).parseFromString(e,"text/html"),i=[];let c=!1;for(const n of a)try{const r=await this._processSingleFragment(s,n,e,t);i.push(r),"main"===n&&(c=!0)}catch(e){this.logger?.error(`Failed to replace fragment ${n}`,{error:e}),i.push({viewTarget:n,success:!1,error:e.message})}c&&(this._handleScrollRestoration(n,t),this._updateDocumentHead(e));const u=i.filter(e=>e.success);for(const e of u)this.mountAllWithin(e.targetFragment,{priority:"critical",fragmentTarget:e.viewTarget}),this.eventBus.emit("dom:content-loaded",{fragment:e.targetFragment,viewTarget:e.viewTarget,trigger:"fragment-replacement"}),this.options.mountDelay>0?setTimeout(()=>{this.mountAllWithin(e.targetFragment,{priority:"normal",fragmentTarget:e.viewTarget})},this.options.mountDelay):this.mountAllWithin(e.targetFragment,{priority:"normal",fragmentTarget:e.viewTarget});if(this.options.trackPerformance){const e=performance.now()-l;this.performanceMetrics.fragmentReplacements++,this.logger?.info("Multiple fragments replacement completed",{duration:`${e.toFixed(2)}ms`,targetsProcessed:a.length,successfulReplacements:u.length,metrics:this.performanceMetrics})}this.eventBus.emit("page:fragments-replaced",{results:i,viewTargets:a,duration:this.options.trackPerformance?performance.now()-l:null,options:t})}catch(n){throw this.logger?.error("Multiple fragments replacement failed",{error:n,viewTargets:a,html:e.slice(0,100)}),this.eventBus.emit("page:fragments-replace-error",{viewTargets:a,error:n,options:t}),n}finally{this.logger?.groupEnd()}}async _processSingleFragment(e,t,n,r){const{sourceFragment:o,targetFragment:s}=this._extractTargetFragmentFromDoc(e,t);if(!o)throw new Error(`Source fragment with data-view="${t}" not found in fetched HTML`);if(!s)throw new Error(`Target fragment with data-view="${t}" not found in current document`);const i=this.options.targetGroupTransitions?.[t];this.eventBus.emit("page:fragment-will-replace",{sourceFragment:o,targetFragment:s,viewTarget:t,html:n,options:r,transitionConfig:i});try{i?.out&&await this._performFragmentTransition(s,"out",i),this.unmountAllWithin(s),i?.in?await this._replaceContentWithTransition(s,o,i):(s.innerHTML=o.innerHTML,this._copyFragmentAttributes(o,s)),this.eventBus.emit("page:fragment-did-replace",{targetFragment:s,viewTarget:t,options:r,transitionConfig:i})}catch(e){this.logger?.error(`Fragment transition failed for ${t}`,{error:e,viewTarget:t,transitionConfig:i}),this.unmountAllWithin(s),s.innerHTML=o.innerHTML,this._copyFragmentAttributes(o,s)}return{viewTarget:t,success:!0,sourceFragment:o,targetFragment:s,transitionConfig:i}}async _replaceContentWithTransition(e,t,n){return new Promise(r=>{requestAnimationFrame(()=>{e.innerHTML=t.innerHTML,this._copyFragmentAttributes(t,e),this._performFragmentTransition(e,"in",n).then(r)})})}async _performFragmentTransition(e,t,n){const r=n[t],o=n.duration||300,s=n.easing||"ease";this.logger?.debug(`Performing ${t} transition: ${r}`,{fragment:e,duration:o,easing:s});try{if("string"!=typeof r||r.includes("("))await this._performJSTransition(e,t,n);else{const s="in"===t?n.out:null;await this._performCSSTransition(e,r,o,t,s)}this.eventBus.emit(`page:fragment-transition-${t}`,{fragment:e,viewTarget:e.dataset.view,transitionType:r,duration:o})}catch(n){throw this.logger?.warn("Fragment transition failed",{fragment:e,direction:t,transitionType:r,error:n}),n}}_performCSSTransition(e,t,n,r="in",o=null){return new Promise(n=>{const s=o=>{o&&o.target!==e||(e.removeEventListener("animationend",s),e.removeEventListener("transitionend",s),"in"===r&&e.classList.remove(t),n())};e.addEventListener("animationend",s),e.addEventListener("transitionend",s),requestAnimationFrame(()=>{e.classList.add(t),"in"===r&&o&&requestAnimationFrame(()=>{e.classList.remove(o)})})})}async _performJSTransition(e,t,n){const r=n.duration||300,o=n.easing||"ease";e.style.transition=`opacity ${r}ms ${o}, transform ${r}ms ${o}`,"out"===t?(e.style.opacity="0",e.style.transform="translateX(-20px)"):(e.style.opacity="0",e.style.transform="translateX(20px)",e.getBoundingClientRect(),e.style.opacity="1",e.style.transform="translateX(0)"),await new Promise(n=>{setTimeout(()=>{e.style.transition="","in"===t&&(e.style.opacity="",e.style.transform=""),n()},r)})}_extractTargetFragmentFromDoc(e,t){let n=null,r=null;return n=e.querySelector(`[data-view="${t}"]`),n||(this.logger?.warn(`Fragment data-view="${t}" not found, trying fallbacks`),n=e.querySelector(`#${t}`),n||"main"!==t||(n=e.querySelector("main")||e.querySelector('[role="main"]')||e.querySelector("#app")||e.querySelector(".main-content")),n||(n=e.querySelector(`.${t}`))),r=document.querySelector(`[data-view="${t}"]`),r||(this.logger?.warn(`Target fragment data-view="${t}" not found in current document, trying fallbacks`),r=document.querySelector(`#${t}`),r||"main"!==t||(r=document.querySelector("main")||document.querySelector('[role="main"]')||document.querySelector("#app")||document.querySelector(".main-content")),r||(r=document.querySelector(`.${t}`))),this.logger?.info("Fragment extraction result",{viewTarget:t,sourceFound:!!n,targetFound:!!r,sourceSelector:n?.tagName+(n?.className?"."+n.className:""),targetSelector:r?.tagName+(r?.className?"."+r.className:"")}),{sourceFragment:n,targetFragment:r}}replaceFragment(e,t={}){const{fromNavigation:n=!1,fromPopstate:r=!1,preserveScroll:o=!1,url:s=null,trigger:i="unknown",viewTarget:a="main"}=t;return this.replaceFragments(e,{fromNavigation:n,fromPopstate:r,preserveScroll:o,url:s,trigger:i,viewTargets:[a]})}_updateDocumentHead(e){try{const t=new DOMParser,n=t.parseFromString(e,"text/html").querySelector("head");if(!n)return void this.logger?.warn("No head element found in source HTML");this.logger?.group("Updating document head metadata");const r=["title",'meta[name="description"]','meta[name="keywords"]','meta[name="robots"]','meta[name="author"]','meta[property^="og:"]','meta[name^="twitter:"]','meta[property^="article:"]','link[rel="canonical"]','link[rel="alternate"]','meta[name="theme-color"]'];let o=0;for(const e of r){const t=n.querySelectorAll(e);if(0!==t.length){if("title"===e){const e=t[0];e&&e.textContent.trim()&&(document.title=e.textContent.trim(),o++,this.logger?.info("Updated document title",{newTitle:document.title}));continue}if('link[rel="canonical"]'===e){document.querySelectorAll('link[rel="canonical"]').forEach(e=>e.remove());const e=t[0];if(e&&e.href){const t=document.createElement("link");t.rel="canonical",t.href=e.href,document.head.appendChild(t),o++,this.logger?.info("Updated canonical URL",{canonicalUrl:e.href})}continue}for(const e of t)"meta"===e.tagName.toLowerCase()?(this._updateMetaTag(e),o++):"link"===e.tagName.toLowerCase()&&(this._updateLinkTag(e),o++)}}this.eventBus.emit("page:head-updated",{updatedElements:o,newTitle:document.title}),this.logger?.info(`Updated ${o} head elements`)}catch(e){this.logger?.error("Failed to update document head",{error:e}),this.eventBus.emit("page:head-update-error",{error:e})}finally{this.logger?.groupEnd()}}_updateMetaTag(e){const t=e.getAttribute("name"),n=e.getAttribute("property"),r=e.getAttribute("content");if(!r)return;let o;if(t)o=`meta[name="${t}"]`;else{if(!n)return;o=`meta[property="${n}"]`}document.querySelectorAll(o).forEach(e=>e.remove());const s=document.createElement("meta");t&&s.setAttribute("name",t),n&&s.setAttribute("property",n),s.setAttribute("content",r),["charset","http-equiv","scheme"].forEach(t=>{e.hasAttribute(t)&&s.setAttribute(t,e.getAttribute(t))}),document.head.appendChild(s),this.logger?.debug("Updated meta tag",{selector:o,content:r.substring(0,100)+(r.length>100?"...":"")})}_updateLinkTag(e){const t=e.getAttribute("rel"),n=e.getAttribute("href");if(!t||!n)return;if(["stylesheet","icon","manifest","preload","prefetch"].includes(t))return void this.logger?.debug("Skipping critical link tag",{rel:t,href:n});const r=`link[rel="${t}"]`,o=e.getAttribute("hreflang"),s=o?`link[rel="${t}"][hreflang="${o}"]`:r;document.querySelectorAll(s).forEach(e=>e.remove());const i=document.createElement("link");i.setAttribute("rel",t),i.setAttribute("href",n),["hreflang","type","media","sizes"].forEach(t=>{e.hasAttribute(t)&&i.setAttribute(t,e.getAttribute(t))}),document.head.appendChild(i),this.logger?.debug("Updated link tag",{rel:t,href:n})}_copyFragmentAttributes(e,t){if(["data-state","data-loading","data-error","data-version","aria-live","aria-label","aria-describedby"].forEach(n=>{e.hasAttribute(n)?t.setAttribute(n,e.getAttribute(n)):t.removeAttribute(n)}),e.className){const n=Array.from(t.classList).filter(e=>e.startsWith("component-")||e.startsWith("router-")||e.startsWith("page-"));t.className=e.className,n.forEach(e=>t.classList.add(e))}}_handleScrollRestoration(e,t){if(t.preserveScroll&&e)window.scrollTo(e.x,e.y);else switch(this.options.scrollPosition){case"top":window.scrollTo(0,0);break;case"element":if(this.options.scrollElement){const e=document.querySelector(this.options.scrollElement);e&&e.scrollIntoView({behavior:"smooth"})}}}_startObserver(e){"MutationObserver"in window?(this.observer=new MutationObserver(e=>{this.options.batchUpdates?(this.pendingUpdates.push(...e),this.throttledUpdate()):this._processMutations(e)}),this.observer.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-component","data-lazy-component"]}),this.logger?.info("DOM observer started",{root:this.containerSelector})):this.logger?.warn("MutationObserver not available, falling back to manual updates")}_processBatchedUpdates(){if(0===this.pendingUpdates.length)return;const e=[...this.pendingUpdates];this.pendingUpdates=[],this._processMutations(e)}_processMutations(e){const t=new Set,n=new Set;for(const r of e){if(r.addedNodes)for(const e of r.addedNodes)e.nodeType===Node.ELEMENT_NODE&&(t.add(e),e.querySelectorAll("[data-component], [data-lazy-component]").forEach(e=>t.add(e)));if(r.removedNodes)for(const e of r.removedNodes)e.nodeType===Node.ELEMENT_NODE&&n.add(e)}t.size>0&&this.mountAllWithin(this.container,{addedNodes:Array.from(t),trigger:"mutation"}),n.size>0&&this.unmountRemoved(Array.from(n))}mountAllWithin(e,t={}){const{addedNodes:n=null,priority:r="normal",trigger:o="initial",fragmentTarget:s=null}=t,i=this.options.trackPerformance?performance.now():0;this.logger?.group("Mounting components",{priority:r,trigger:o,fragmentTarget:s,addedNodesCount:n?.length||0,rootSelector:e.tagName+(e.id?"#"+e.id:"")+(e.className?"."+e.className.split(" ")[0]:"")});try{const t=this.registry.filter(e=>"critical"===r?"critical"===e.priority||!0===e.critical:"normal"!==r||"critical"!==e.priority);for(const r of t)try{this._mountComponentConfig(r,e,n,s)}catch(e){this.logger?.error(`Failed to mount component ${r.name}`,{error:e,config:r}),this.eventBus.emit("page:component-mount-error",{componentName:r.name,error:e,config:r,fragmentTarget:s})}if(this.options.trackPerformance){const e=performance.now()-i;this.performanceMetrics.totalMountTime+=e,this.performanceMetrics.averageMountTime=this.performanceMetrics.totalMountTime/Math.max(1,this.performanceMetrics.fragmentReplacements)}}finally{this.logger?.groupEnd()}}_mountComponentConfig(e,t,n,r){const o=(n||[t]).flatMap(t=>{const n=[];return t.matches&&t.matches(e.selector)&&n.push(t),n.push(...t.querySelectorAll(e.selector)),n});if(0===o.length)return;const s=this._ensureInstance(e);let i=0;for(const t of o)try{if(t.hasAttribute("data-component-mounted"))continue;s.mount(t),t.setAttribute("data-component-mounted",e.name),r&&t.setAttribute("data-fragment-target",r),i++,this.eventBus.emit("page:component-mounted",{componentName:e.name,element:t,instance:s,fragmentTarget:r})}catch(n){this.logger?.error(`Failed to mount ${e.name} on element`,{error:n,element:t})}i>0&&(this.performanceMetrics.componentMounts+=i,this.logger?.info(`Mounted ${i} instances of ${e.name}`,{fragmentTarget:r}))}unmountAllWithin(e){this.logger?.group("Unmounting components within root");try{let t=0;for(const[n,r]of this.instances)if(r._elementsKeys)for(const o of r._elementsKeys())if(e.contains(o))try{r.unmount(o),o.removeAttribute("data-component-mounted"),o.removeAttribute("data-fragment-target"),t++,this.eventBus.emit("page:component-unmounted",{componentName:n,element:o,instance:r})}catch(e){this.logger?.error(`Failed to unmount ${n}`,{error:e,element:o})}this.performanceMetrics.componentUnmounts+=t,t>0&&this.logger?.info(`Unmounted ${t} component instances`)}finally{this.logger?.groupEnd()}}unmountRemoved(e){let t=0;for(const[e,n]of this.instances)if(n._elementsKeys)for(const r of n._elementsKeys())if(!document.documentElement.contains(r))try{n.unmount(r),t++,this.eventBus.emit("page:component-unmounted",{componentName:e,element:r,instance:n,reason:"removed"})}catch(t){this.logger?.error(`Failed to unmount removed ${e}`,{error:t,element:r})}t>0&&this.logger?.info(`Unmounted ${t} components from removed nodes`)}_ensureInstance(e){const t=this.instances.get(e.name);if(t)return t;if(e.dependsOn?.length)for(const t of e.dependsOn){const n=this.registry.find(e=>e.name===t);n?this._ensureInstance(n):this.logger?.warn(`Dependency not found: ${t} for ${e.name}`)}const n=e.loader();if(!(n instanceof Promise)){const t=this._createInstance(n.default,e);return this.instances.set(e.name,t),this._trackComponentLoad(e.name),t}return this._handleAsyncLoading(e,n)}_handleAsyncLoading(e,t){const n=[],r=new h(e=>n.push(["mount",e]),e=>n.push(["unmount",e]));return this.instances.set(e.name,r),this.loadingPromises.set(e.name,t),t.then(t=>{const r=this._createInstance(t.default,e);for(const[t,o]of n)try{r[t](o),"mount"===t&&(o.setAttribute("data-component-mounted",e.name),o.classList.remove("component-loading"),o.removeAttribute("data-component-state"))}catch(n){this.logger?.error(`Dequeued ${e.name}.${t} failed`,{error:n,element:o}),"mount"===t&&(o.classList.remove("component-loading"),o.classList.add("component-error"),o.setAttribute("data-component-state","error"))}this.instances.set(e.name,r),this._trackComponentLoad(e.name),this.loadingPromises.delete(e.name),this.retryCount.delete(e.name),this.eventBus.emit("page:component-loaded",{componentName:e.name,instance:r,queueSize:n.length}),this.logger?.info(`Component ${e.name} loaded successfully`,{queuedOperations:n.length})}).catch(t=>{this.logger?.error(`Failed to load component ${e.name}`,{error:t});for(const[e,t]of n)"mount"===e&&(t.classList.remove("component-loading"),t.classList.add("component-error"),t.setAttribute("data-component-state","error"));if(this.options.retryFailedLoads){const t=this.retryCount.get(e.name)||0;if(t<this.options.maxRetryAttempts)return this.retryCount.set(e.name,t+1),this.logger?.info(`Retrying component load: ${e.name} (attempt ${t+1})`),void setTimeout(()=>{this._handleAsyncLoading(e,e.loader())},1e3*Math.pow(2,t))}this.instances.delete(e.name),this.loadingPromises.delete(e.name),this.eventBus.emit("page:component-load-error",{componentName:e.name,error:t,retries:this.retryCount.get(e.name)||0})}),r}_createInstance(e,t){let n;if("function"==typeof e)n=e;else if(e&&"function"==typeof e.default)n=e.default;else if(e&&"function"==typeof e[t.name])n=e[t.name];else{if(n=Object.values(e||{}).find(e=>"function"==typeof e),!n)throw new Error(`No valid constructor found in module for component ${t.name}. Available exports: ${Object.keys(e||{}).join(", ")}`)}this.logger?.info(`Creating instance of ${t.name}`,{ComponentClass:n.name,config:t});try{const e=new n({eventBus:this.eventBus,logger:this.logger,router:this.router,config:t});return this.logger?.info(`Created ${t.name} with DI pattern`,{config:t}),e}catch(e){this.logger?.warn(`DI constructor failed for ${t.name}, trying fallback patterns`,{error:e});try{const e=new n;return this.logger?.info(`Created ${t.name} with no-args constructor`,{config:t}),"function"==typeof e.setEventBus&&e.setEventBus(this.eventBus),"function"==typeof e.setLogger&&e.setLogger(this.logger),"function"==typeof e.setRouter&&e.setRouter(this.router),e}catch(r){throw this.logger?.error(`All constructor patterns failed for ${t.name}`,{originalError:e,fallbackError:r,ComponentClass:n.name}),new Error(`Cannot instantiate component ${t.name}: ${e.message}`)}}}_handleLazyLoad(e,t){const n=this.registry.find(e=>e.name===t);if(!n)return void this.logger?.warn(`Lazy load requested for unknown component: ${t}`);this.logger?.info(`Lazy loading component: ${t}`,{element:e});this._ensureInstance(n).mount(e)}_initialMount(){try{const e=this.container;this.mountAllWithin(e,{trigger:"initial"}),this._startObserver(e)}catch(e){this.logger?.error("Initial component mounting failed",{error:e})}}_createThrottledFunction(e,t){let n=null,r=0;return function(...o){const s=Date.now();s-r>t?(e.apply(this,o),r=s):(clearTimeout(n),n=setTimeout(()=>{e.apply(this,o),r=Date.now()},t-(s-r)))}}getPerformanceMetrics(){return{...this.performanceMetrics}}getInstances(){return new Map(this.instances)}getLoadingStatus(){return{loading:Array.from(this.loadingPromises.keys()),retries:Object.fromEntries(this.retryCount)}}getComponentRegistry(){return this.registry||[]}getComponentStates(){const e={},t=this.getLoadingStatus();return this.registry.forEach(n=>{const r=this.instances.get(n.name),o=t.loading.includes(n.name);t.retries[n.name];const s=document.querySelectorAll(n.selector).length;let i="not-loaded";o?i="loading":r?i="loaded":s>0&&(i="available"),e[n.name]={status:i,hasInstance:!!r,instanceType:r?r.constructor.name:null,elementsFound:s,isLoading:o,retryCount:t.retries[n.name]||0,selector:n.selector}}),e}getMetrics(){return{componentMounts:this.performanceMetrics?.componentMounts||0,componentUnmounts:this.performanceMetrics?.componentUnmounts||0,averageMountTime:this.performanceMetrics?.averageMountTime||0,fragmentReplacements:this.performanceMetrics?.fragmentReplacements||0,totalMountTime:this.performanceMetrics?.totalMountTime||0}}_trackComponentLoad(e){const t=Date.now();this.sessionTracking.componentsLoaded.add(e),this.sessionTracking.loadHistory.push({component:e,timestamp:t,page:window.location.pathname});const n=this.sessionTracking.mountCount.get(e)||0;this.sessionTracking.mountCount.set(e,n+1),this.sessionTracking.lastMountTime.set(e,t),this.sessionTracking.loadHistory.length>100&&this.sessionTracking.loadHistory.shift()}getSessionTracking(){return{totalComponentsLoaded:this.sessionTracking.componentsLoaded.size,componentsLoadedThisSession:Array.from(this.sessionTracking.componentsLoaded),loadHistory:[...this.sessionTracking.loadHistory],mountCounts:Object.fromEntries(this.sessionTracking.mountCount),lastMountTimes:Object.fromEntries(this.sessionTracking.lastMountTime)}}destroy(){if(this.logger?.info("PageManager destroying"),this.observer&&(this.observer.disconnect(),this.observer=null),this._lazyObserver&&(this._lazyObserver.disconnect(),this._lazyObserver=null),this._cleanupInterval&&(clearInterval(this._cleanupInterval),this._cleanupInterval=null),this.unmountAllWithin(this.container),this._componentPool){for(const[e,t]of this._componentPool)for(const n of t)if("function"==typeof n.destroy)try{n.destroy()}catch(t){this.logger?.warn(`Error destroying pooled instance of ${e}`,{error:t})}this._componentPool.clear()}this.instances.clear(),this.loadingPromises.clear(),this.retryCount.clear(),this._mountedElements&&this._mountedElements.clear(),this._errorCounts&&this._errorCounts.clear(),this._circuitBreakers&&this._circuitBreakers.clear(),this.eventBus.off("router:navigate-success"),this.eventBus.off("router:popstate"),this.eventBus.off("component:lazy-load"),this.eventBus.emit("page-manager:destroyed",{}),this.logger?.info("PageManager destroyed")}}class g{static create(e={}){return new g(e)}constructor(e={}){this.config={mode:e.mode||"production",debug:e.debug||!1,router:e.router||null,pageManager:e.pageManager||{}},this.logger=null,this.eventBus=null,this.router=null,this.pageManager=null,this.componentRegistry=null,this.webComponentLoader=null,this.components=new p(this),this._initialized=!1}run(){return"complete"===document.readyState||"interactive"===document.readyState?(this.init(),Promise.resolve(this)):new Promise(e=>{document.addEventListener("DOMContentLoaded",()=>{this.init(),e(this)})})}init(){if(this._initialized)return console.warn("[Parallelogram] Already initialized"),this;this.logger=new t({},this.config.debug),this.logger?.info("Parallelogram initializing",{mode:this.config.mode,debug:this.config.debug,routerEnabled:!!this.config.router}),this.eventBus=new r;const s=e.create(this.config.mode);this.components._configs.enhancementComponents.forEach(({name:e,selector:t,options:n})=>{s.component(e,t,n)}),this.componentRegistry=s.build(),this.config.router&&(this.router=new o({eventBus:this.eventBus,logger:this.logger,options:this.config.router}));const i={containerSelector:this.config.pageManager.containerSelector||"body",registry:this.componentRegistry,eventBus:this.eventBus,logger:this.logger,router:this.router,options:this.config.pageManager};this.pageManager=new m(i);const a={};return this.components._configs.webComponents.forEach(({name:e,loader:t})=>{a[e]=t}),this.webComponentLoader=new n(a,{observeDOM:!0,onLoad:e=>{this.logger?.info(`Web component loaded: ${e}`)},onError:(e,t)=>{this.logger?.error(`Failed to load web component: ${e}`,t)}}),this.webComponentLoader.init(),this.pageManager.mountAllWithin(document.body,{trigger:"initial-global"}),this._initialized=!0,this.logger?.info("Parallelogram initialized successfully"),this}destroy(){this._initialized&&(this.logger?.info("Parallelogram destroying"),this.webComponentLoader&&this.webComponentLoader.destroy(),this.pageManager&&this.pageManager.destroy?.(),this.router&&this.router.destroy?.(),this.eventBus&&this.eventBus.clear(),this._initialized=!1)}get isInitialized(){return this._initialized}}class p{constructor(e){this.parallelogram=e,this._configs={webComponents:[],enhancementComponents:[]}}add(e,t,n={}){if(this._detectWebComponent(e))this._configs.webComponents.push({name:e,loader:t});else{const r="function"==typeof t?t:t.loader,o="function"==typeof t?n:{...t,...n};this._configs.enhancementComponents.push({name:this._generateComponentName(e),selector:e,options:{...o,loader:r}})}return this}_detectWebComponent(e){return!/[\[\.\#\:\s]/.test(e)}_generateComponentName(e){const t=e.match(/data-([a-z-]+)|[\.\#]([a-z-]+)/i);return t?t[1]||t[2]:e.replace(/[^a-z0-9-]/gi,"")}}window.MockXHR=class{constructor(){this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.response=null,this.responseType="",this.responseURL="",this._listeners={},this._method=null,this._url=null,this._uploadDelay=1500,this._logger=new t("MockXHR",!0),this.upload={_listeners:{},addEventListener:(e,t)=>{this.upload._listeners[e]=this.upload._listeners[e]||[],this.upload._listeners[e].push(t)},dispatchEvent:e=>{const t=this.upload._listeners[e.type];t&&t.forEach(t=>t(e))}}}open(e,t){this._method=e,this._url=t,this.readyState=1,this._logger.debug("open",{method:e,url:t})}send(e){if(this._logger.debug("send",{url:this._url,hasBody:!!e}),"string"==typeof e)try{const t=JSON.parse(e);if(t.sequence)return void this._handleSequenceUpdate(t)}catch(e){}let t=null;e instanceof FormData&&(t=e.get("file")),t?this._simulateUpload(t):this._handleError("No file provided")}addEventListener(e,t){this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t)}removeEventListener(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(e=>e!==t))}dispatchEvent(e){const t=this._listeners[e.type];t&&t.forEach(t=>t.call(this,e))}setRequestHeader(){}getResponseHeader(){return null}getAllResponseHeaders(){return""}abort(){this._logger.debug("abort")}async _simulateUpload(e){const t=e.size,n=this._uploadDelay/20;for(let e=0;e<=20;e++){await this._delay(n);const r=Math.min(e/20*t,t),o=new ProgressEvent("progress",{lengthComputable:!0,loaded:r,total:t});this.upload.dispatchEvent(o)}await this._generateMockResponse(e)}async _generateMockResponse(e){const t=e.type.startsWith("image/"),n="file_"+Date.now()+"_"+Math.random().toString(36).substr(2,9);let r=null;t&&(r=await this._createImagePreview(e));const o={id:n,title:e.name.replace(/\.[^/.]+$/,""),filename:e.name,preview:r,info:this._formatFileSize(e.size)+" â€¢ "+e.type,type:t?"image":"document"};this.status=200,this.statusText="OK",this.responseText=JSON.stringify(o),this.readyState=4,this._logger.info("upload complete",o),this.dispatchEvent(new Event("load"))}_handleSequenceUpdate(e){this._logger.info("sequence update",{sequence:e.sequence}),this.status=200,this.statusText="OK",this.responseText=JSON.stringify({success:!0}),this.readyState=4,this.dispatchEvent(new Event("load"))}_handleError(e){this.status=400,this.statusText="Bad Request",this.responseText=JSON.stringify({error:e}),this.readyState=4,this._logger.error("upload error",e),this.dispatchEvent(new Event("error"))}_createImagePreview(e){return new Promise(t=>{const n=new FileReader;n.onload=e=>{t(e.target.result)},n.onerror=()=>{t(null)},n.readAsDataURL(e)})}_formatFileSize(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]}_delay(e){return new Promise(t=>setTimeout(t,e))}};const f=g.create({mode:"production",debug:!0,router:{timeout:1e4,loadingClass:"router-loading"},pageManager:{containerSelector:'[data-view="main"]',targetGroups:{main:["main","navbar"]},targetGroupTransitions:{main:{out:"page-transition-out",in:"page-transition-in"},navbar:{out:"fade-scale-down",in:"fade-scale-up",duration:250},sidebar:{out:"slide-left",in:"slide-right",duration:200}},enableComponentPooling:!0,enableHealthMonitoring:!0,trackPerformance:!0}});f.components.add("p-modal",()=>import("./PModal-CRzmewiA.js")).add("p-toasts",()=>import("./PToasts-DRXXsA0f.js")).add("p-select",()=>import("./PSelect-cTrl2X3P.js")).add("p-datetime",()=>import("./PDatetime-aCIysmWv.js")).add("p-uploader",()=>import("./PUploader-CzX46eZr.js")).add("[data-lazysrc]:not([data-lazysrc-complete])",()=>import("./Lazysrc-ByCpJ7KH.js")).add("[data-toggle]",()=>import("./Toggle-BTCnPEIM.js")).add("[data-modal][data-modal-target]",()=>import("./Modal-BddYJct0.js")).add("[data-toast-trigger][data-toast-message]",()=>import("./Toast-BbcWUVHH.js")).add("[data-scrollhide]",()=>import("./Scrollhide-D_L8lOGf.js")).add("[data-reveal]",()=>import("./Scrollreveal-CuQjBKzR.js")).add("[data-tabs]",()=>import("./Tabs-VwtZR__u.js")).add("[data-videoplay]",()=>import("./Videoplay-DkaEz4rG.js")).add("[data-datatable]",()=>import("./DataTable-Bwr_1XAP.js")).add("[data-lightbox]",()=>import("./Lightbox-DSimZeso.js")).add("[data-form-validator]",()=>import("./FormEnhancer-BeQ2OClc.js")).add("[data-copy-to-clipboard]",()=>import("./CopyToClipboard-DkSQwrcf.js")).add("[data-selectloader]",()=>import("./SelectLoader-DbvEYnt7.js")).add('[data-demo="home"]',()=>import("./DemoHome-C6dvcXav.js")).add('[data-demo="media"]',()=>import("./DemoMedia-EOW-YhIK.js")).add('[data-demo="performance"]',()=>import("./DemoPerformance-CfA4e3F4.js")).add('[data-demo="ui-components"]',()=>import("./DemoUIComponents-VyEjbvw-.js")).add('[data-demo="uploader"]',()=>import("./DemoFileUploader-Hiqd0Nz9.js")).add('[data-demo="selectloader"]',()=>import("./DemoSelectLoader-VJV1tKWk.js")),f.run();export{d as B,i as a,u as c,a as d,l as g,c as t};
