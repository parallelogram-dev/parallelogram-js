import{B as e}from"./parallelogram-demo.min.js";class n extends e{constructor(e){super(e),this.performancePanelVisible=!1}_init(e){const n=super._init(e);this.togglePerformancePanel=this.togglePerformancePanel.bind(this),this.updatePerformancePanel=this.updatePerformancePanel.bind(this),this.updateComponentRegistry=this.updateComponentRegistry.bind(this),this._setupEventListeners(e,n.controller.signal),this.updateComponentRegistry(),this.performancePanelVisible=!1;const t=document.getElementById("performance-panel");return t&&t.classList.remove("active"),n}_setupEventListeners(e,n){const t=document.querySelector("[data-demo-performance-toggle]");t&&t.addEventListener("click",this.togglePerformancePanel,{signal:n});const r=document.querySelector(".performance-panel__close");r&&r.addEventListener("click",()=>{this.performancePanelVisible&&this.togglePerformancePanel()},{signal:n}),this.performanceInterval=setInterval(()=>{this.performancePanelVisible&&this.updatePerformancePanel()},1e3);const a=this.getState(e)?.cleanup;a&&(this.elements.get(e).cleanup=()=>{clearInterval(this.performanceInterval),a()})}togglePerformancePanel(){const e=document.getElementById("performance-panel");e&&(this.performancePanelVisible=!this.performancePanelVisible,e.classList.toggle("active",this.performancePanelVisible),this.performancePanelVisible&&this.updatePerformancePanel(),this._dispatch(e,"demo:performance-panel-toggled",{visible:this.performancePanelVisible}))}updatePerformancePanel(){const e=document.getElementById("performance-metrics");if(!e)return;const n=this._getPerformanceMetrics();e.innerHTML=`\n      <div class="performance__metric">\n        <span>Current Page:</span>\n        <strong>${window.location.pathname}</strong>\n      </div>\n      <div class="performance__metric">\n        <span>Components Mounted:</span>\n        <strong>${n.pageManager?.componentMounts||0}</strong>\n      </div>\n      <div class="performance__metric">\n        <span>Router Navigations:</span>\n        <strong>${n.router?.navigationCount||0}</strong>\n      </div>\n      <div class="performance__metric">\n        <span>Memory Usage:</span>\n        <strong>${n.memory?.usedMB||"N/A"} MB</strong>\n      </div>\n    `}updateComponentRegistry(){const e=document.getElementById("component-registry-display");if(e)if(window.pageManager){const n=window.pageManager.getComponentRegistry?window.pageManager.getComponentRegistry():[],t=window.pageManager.getComponentStates?window.pageManager.getComponentStates():{};n.length>0?e.innerHTML=n.map(e=>{const n=t[e.name]||{status:"not-loaded"};return`\n            <div class="component-registry__item ${`component-status--${n.status}`}">\n              <div class="component-registry__name">${e.name}</div>\n              <div class="component-registry__status">${n.status}</div>\n              <div class="component-registry__selector">${e.selector}</div>\n            </div>\n          `}).join(""):e.innerHTML='<p class="component-registry__empty">No components registered</p>'}else e.innerHTML='<p class="component-registry__loading">Loading component registry...</p>'}_getPerformanceMetrics(){const e=window.getPerformanceMetrics?window.getPerformanceMetrics():{};return window.performance&&window.performance.memory&&(e.memory={usedMB:Math.round(window.performance.memory.usedJSHeapSize/1024/1024)}),e}getPerformancePanelState(){return this.performancePanelVisible}showPerformancePanel(){this.performancePanelVisible||this.togglePerformancePanel()}hidePerformancePanel(){this.performancePanelVisible&&this.togglePerformancePanel()}}export{n as DemoHome};
