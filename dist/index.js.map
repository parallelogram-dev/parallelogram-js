{"version":3,"file":"index.js","sources":["../src/core/EventManager.js","../src/core/DevLogger.js","../src/core/BaseComponent.js","../src/components/XToasts.js","../src/managers/AlertManager.js","../src/components/XModal.js","../src/components/LazyImage.js","../src/components/Modal.js"],"sourcesContent":["export class EventManager {\n  constructor() {\n    this.listeners = new Map();\n  }\n\n  on(event, callback) {\n    if (!this.listeners.has(event)) {\n      this.listeners.set(event, new Set());\n    }\n    const listeners = this.listeners.get(event);\n    listeners.add(callback);\n    return () => this.off(event, callback);\n  }\n\n  once(event, callback) {\n    const unsubscribe = this.on(event, (payload) => {\n      unsubscribe();\n      callback(payload);\n    });\n    return unsubscribe;\n  }\n\n  off(event, callback) {\n    const listeners = this.listeners.get(event);\n    if (listeners) {\n      listeners.delete(callback);\n      if (listeners.size === 0) {\n        this.listeners.delete(event);\n      }\n    }\n  }\n\n  emit(event, payload) {\n    const listeners = this.listeners.get(event);\n    if (!listeners) return;\n    const listenersCopy = [...listeners];\n    for (const callback of listenersCopy) {\n      try {\n        callback(payload);\n      } catch (error) {\n        console.error(`[EventManager] Error in listener for \"${event}\":`, error);\n      }\n    }\n  }\n\n  clear(event) {\n    if (event) {\n      this.listeners.delete(event);\n    } else {\n      this.listeners.clear();\n    }\n  }\n}","export class DevLogger {\n  constructor(namespace, enabled = false) {\n    this.namespace = namespace;\n    this.enabled = enabled;\n  }\n\n  setEnabled(enabled) {\n    this.enabled = Boolean(enabled);\n  }\n\n  _getPrefix(level) {\n    return `${new Date().toISOString()} [${this.namespace}] ${level}:`;\n  }\n\n  log(...args) {\n    if (this.enabled) {\n      console.log(this._getPrefix('LOG'), ...args);\n    }\n  }\n\n  info(...args) {\n    if (this.enabled) {\n      console.info(this._getPrefix('INFO'), ...args);\n    }\n  }\n\n  warn(...args) {\n    if (this.enabled) {\n      console.warn(this._getPrefix('WARN'), ...args);\n    }\n  }\n\n  error(...args) {\n    console.error(this._getPrefix('ERROR'), ...args);\n  }\n\n  child(subNamespace) {\n    return new DevLogger(`${this.namespace}:${subNamespace}`, this.enabled);\n  }\n}\n\nexport function createLogger(namespace, forceEnabled) {\n  if (forceEnabled !== undefined) {\n    return new DevLogger(namespace, forceEnabled);\n  }\n  const isDebugMode =\n    (typeof window !== 'undefined' && window.location?.search?.includes('debug=1')) ||\n    (typeof localStorage !== 'undefined' && localStorage.getItem('app:debug') === '1');\n  return new DevLogger(namespace, isDebugMode);\n}","export class BaseComponent {\n  constructor(options = {}) {\n    this.eventBus = options.eventBus;\n    this.logger = options.logger;\n    this.elements = new WeakMap();\n    this._elementKeys = new Set();\n  }\n\n  mount(element) {\n    if (this.elements.has(element)) {\n      return this.update(element);\n    }\n    try {\n      const state = this._init(element);\n      this.elements.set(element, state);\n      this._elementKeys.add(element);\n      this.logger?.info('Component mounted', element);\n    } catch (error) {\n      this.logger?.error('Failed to mount component', error);\n    }\n  }\n\n  update(element) {\n    const state = this.elements.get(element);\n    if (!state) return;\n    this.logger?.info('Component updated', element);\n  }\n\n  unmount(element) {\n    const state = this.elements.get(element);\n    if (!state) return;\n    try {\n      state.cleanup();\n      this.elements.delete(element);\n      this._elementKeys.delete(element);\n    } catch (error) {\n      this.logger?.error('Failed to unmount component', error);\n    }\n  }\n\n  getState(element) {\n    return this.elements.get(element);\n  }\n\n  _init(element) {\n    const controller = new AbortController();\n    return { cleanup: () => controller.abort(), controller };\n  }\n\n  _getDataAttr(element, name, defaultValue) {\n    const value = element.getAttribute(`data-${name}`);\n    if (value === null) return defaultValue;\n    if (value === 'true') return true;\n    if (value === 'false') return false;\n    if (value === '') return true;\n    const numValue = Number(value);\n    if (!isNaN(numValue) && isFinite(numValue)) return numValue;\n    return value;\n  }\n\n  _dispatch(element, eventName, detail, bubbles = true) {\n    const event = new CustomEvent(eventName, { detail, bubbles, cancelable: true });\n    return element.dispatchEvent(event);\n  }\n}","export class XToasts extends HTMLElement {\n  constructor() {\n    super();\n    const root = this.attachShadow({ mode: 'open' });\n\n    root.innerHTML = `\n      <style>  \n        :host {\n          position: fixed;\n          inset: auto auto auto 0;\n          padding: 12px;\n          z-index: 2147483647;\n          display: grid;\n          gap: 8px;\n          pointer-events: none;\n        }\n        \n        :host([placement=\"top-left\"]) { top: 0; left: 0; }\n        :host([placement=\"top-right\"]) { top: 0; right: 0; left: auto; }\n        :host([placement=\"bottom-right\"]) { bottom: 0; right: 0; left: auto; }\n        :host([placement=\"bottom-left\"]) { bottom: 0; left: 0; }\n        \n        .toast {\n          padding: 10px 12px;\n          border-radius: 8px;\n          color: #fff;\n          box-shadow: 0 6px 20px rgba(0,0,0,.25);\n          opacity: 0;\n          transform: translateY(-6px);\n          animation: toast-in 0.18s ease-out forwards;\n          cursor: pointer;\n          font: 14px/1.4 system-ui, -apple-system, sans-serif;\n          outline: none;\n          pointer-events: auto;\n          min-width: 300px;\n        }\n        \n        .toast.info { background: #111827; }\n        .toast.success { background: #065f46; }\n        .toast.warn { background: #7c2d12; }\n        .toast.error { background: #7f1d1d; }\n        \n        @keyframes toast-in { \n          to { opacity: 1; transform: none; } \n        }\n        \n        .row {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n        \n        .msg {\n          white-space: pre-wrap;\n          flex: 1;\n        }\n        \n        button.close {\n          all: unset;\n          display: inline-flex;\n          align-items: center;\n          justify-content: center;\n          width: 24px;\n          height: 24px;\n          border-radius: 6px;\n          font-weight: 700;\n          background: rgba(255,255,255,0.1);\n        }\n        \n        button.close:hover {\n          background: rgba(255,255,255,0.2);\n        }\n      </style>  \n      <div id=\"container\" role=\"region\" aria-live=\"polite\"></div>\n    `;\n\n    this._container = root.getElementById('container');\n    this._idCounter = 0;\n    this._toasts = new Map();\n  }\n\n  toast({ message, type = 'info', timeout = 4000, allowHTML = false }) {\n    const id = ++this._idCounter;\n\n    const element = document.createElement('div');\n    element.className = `toast ${type}`;\n    element.setAttribute('role', type === 'warn' || type === 'error' ? 'alert' : 'status');\n\n    const row = document.createElement('div');\n    row.className = 'row';\n\n    const messageElement = document.createElement('span');\n    messageElement.className = 'msg';\n    if (allowHTML) {\n      messageElement.innerHTML = message;\n    } else {\n      messageElement.textContent = message;\n    }\n\n    const closeButton = document.createElement('button');\n    closeButton.className = 'close';\n    closeButton.setAttribute('aria-label', 'Dismiss notification');\n    closeButton.textContent = 'Ã—';\n\n    row.appendChild(messageElement);\n    row.appendChild(closeButton);\n    element.appendChild(row);\n    this._container.appendChild(element);\n\n    let isRemoved = false;\n    const dismiss = () => {\n      if (isRemoved) return;\n      isRemoved = true;\n\n      element.style.animation = 'toast-out 0.15s ease-in forwards';\n      setTimeout(() => element.remove(), 150);\n      this._toasts.delete(id);\n\n      this.dispatchEvent(new CustomEvent('toast:close', {\n        detail: { id, type, message },\n        bubbles: true\n      }));\n    };\n\n    closeButton.addEventListener('click', dismiss);\n\n    if (timeout > 0) {\n      setTimeout(dismiss, timeout);\n    }\n\n    this._toasts.set(id, { element, type, dismiss });\n\n    this.dispatchEvent(new CustomEvent('toast:show', {\n      detail: { id, type, message },\n      bubbles: true\n    }));\n\n    return dismiss;\n  }\n}\n\nif (!customElements.get('x-toasts')) {\n  customElements.define('x-toasts', XToasts);\n}","import { XToasts } from '../components/XToasts.js';\n\nexport class AlertManager {\n  constructor({ logger, eventBus, placement = 'top-right', container } = {}) {\n    this.logger = logger;\n    this.eventBus = eventBus;\n    this.toastElement = this._getOrCreateToastElement(placement, container);\n    this._setupEventForwarding();\n    this.logger?.info('AlertManager initialized', { placement });\n  }\n\n  info(message, options = {}) {\n    return this.toast({ message, type: 'info', ...options });\n  }\n\n  success(message, options = {}) {\n    return this.toast({ message, type: 'success', ...options });\n  }\n\n  warn(message, options = {}) {\n    return this.toast({ message, type: 'warn', ...options });\n  }\n\n  error(message, options = {}) {\n    return this.toast({ message, type: 'error', timeout: 6000, ...options });\n  }\n\n  toast(options) {\n    const dismiss = this.toastElement.toast(options);\n    this.logger?.info('Toast shown', options);\n    return dismiss;\n  }\n\n  _getOrCreateToastElement(placement, container = document.body) {\n    let toastElement = document.querySelector('x-toasts');\n    if (!toastElement) {\n      toastElement = document.createElement('x-toasts');\n      container.appendChild(toastElement);\n      this.logger?.info('Created new x-toasts element');\n    }\n    toastElement.setAttribute('placement', placement);\n    return toastElement;\n  }\n\n  _setupEventForwarding() {\n    if (!this.eventBus) return;\n    const events = ['toast:show', 'toast:close', 'toast:action'];\n    events.forEach(eventName => {\n      this.toastElement.addEventListener(eventName, (event) => {\n        this.eventBus.emit(`alerts:${eventName.split(':')[1]}`, event.detail);\n      });\n    });\n  }\n\n  static notify(message, type = 'info', options = {}) {\n    if (!AlertManager._globalInstance) {\n      AlertManager._globalInstance = new AlertManager();\n    }\n    return AlertManager._globalInstance.toast({ message, type, ...options });\n  }\n}","/**\n * XModal - Modal dialog web component\n * Can be used standalone without the framework\n * Follows new naming conventions: data-modal-* attributes and BEM CSS classes\n *\n * @example\n * import './components/XModal.js';\n *\n * HTML:\n * <button data-modal data-modal-target=\"#example-modal\">Open Modal</button>\n *\n * <x-modal id=\"example-modal\"\n *          data-modal-closable=\"true\"\n *          data-modal-backdrop-close=\"true\"\n *          data-modal-keyboard=\"true\">\n *   <h2 slot=\"title\">Modal Title</h2>\n *   <p>Modal content goes here.</p>\n *   <div slot=\"actions\">\n *     <button class=\"modal__button modal__button--secondary\" data-modal-close>Cancel</button>\n *     <button class=\"modal__button modal__button--primary\">Save</button>\n *   </div>\n * </x-modal>\n */\n\nexport class XModal extends HTMLElement {\n  static get observedAttributes() {\n    return ['open', 'data-modal-size', 'data-modal-closable'];\n  }\n\n  constructor() {\n    super();\n    const root = this.attachShadow({ mode: 'open' });\n\n    // Use BEM-style CSS with CSS custom properties for theming\n    root.innerHTML = `\n      <style>\n        :host {\n          --modal-backdrop-bg: rgba(0, 0, 0, 0.45);\n          --modal-panel-bg: #0f172a;\n          --modal-panel-color: #e5e7eb;\n          --modal-panel-border: rgba(255, 255, 255, 0.08);\n          --modal-panel-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n          --modal-panel-radius: 16px;\n          --modal-header-bg: #0f172a;\n          --modal-footer-bg: #0f172a;\n          --modal-close-hover-bg: rgba(255, 255, 255, 0.1);\n          --modal-animation-duration: 0.2s;\n          --modal-animation-easing: ease-out;\n        }\n\n        /* Host states */\n        :host {\n          display: none;\n        }\n\n        :host([open]) {\n          display: block;\n          position: fixed;\n          inset: 0;\n          z-index: 9999;\n          animation: modal-fade-in var(--modal-animation-duration) var(--modal-animation-easing);\n        }\n\n        /* Block: Modal backdrop */\n        .modal__backdrop {\n          position: absolute;\n          inset: 0;\n          background: var(--modal-backdrop-bg);\n          animation: modal-backdrop-in var(--modal-animation-duration) var(--modal-animation-easing);\n        }\n\n        /* Block: Modal panel */\n        .modal__panel {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          min-width: min(92vw, 640px);\n          max-width: 92vw;\n          max-height: 86vh;\n          overflow: auto;\n          background: var(--modal-panel-bg);\n          color: var(--modal-panel-color);\n          border: 1px solid var(--modal-panel-border);\n          border-radius: var(--modal-panel-radius);\n          box-shadow: var(--modal-panel-shadow);\n          animation: modal-panel-in var(--modal-animation-duration) var(--modal-animation-easing);\n        }\n\n        /* Panel size modifiers */\n        :host([data-modal-size=\"small\"]) .modal__panel {\n          min-width: min(92vw, 400px);\n        }\n\n        :host([data-modal-size=\"large\"]) .modal__panel {\n          min-width: min(92vw, 800px);\n        }\n\n        :host([data-modal-size=\"fullscreen\"]) .modal__panel {\n          width: 100vw;\n          height: 100vh;\n          max-width: 100vw;\n          max-height: 100vh;\n          border-radius: 0;\n          transform: none;\n          top: 0;\n          left: 0;\n        }\n\n        /* Element: Modal header */\n        .modal__header {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding: 12px 14px;\n          border-bottom: 1px solid var(--modal-panel-border);\n          position: sticky;\n          top: 0;\n          background: var(--modal-header-bg);\n          z-index: 1;\n        }\n\n        .modal__header h2 {\n          margin: 0;\n          font-size: 18px;\n          line-height: 1.3;\n          font-weight: 600;\n        }\n\n        /* Element: Header spacer */\n        .modal__spacer {\n          flex: 1;\n        }\n\n        /* Element: Close button */\n        .modal__close {\n          all: unset;\n          display: inline-flex;\n          align-items: center;\n          justify-content: center;\n          width: 28px;\n          height: 28px;\n          border-radius: 8px;\n          cursor: pointer;\n          font-size: 16px;\n          font-weight: bold;\n          transition: background-color var(--modal-animation-duration) ease;\n        }\n\n        .modal__close:hover {\n          background: var(--modal-close-hover-bg);\n        }\n\n        .modal__close:focus-visible {\n          outline: 2px solid currentColor;\n          outline-offset: 2px;\n        }\n\n        /* Element: Modal content */\n        .modal__content {\n          padding: 14px;\n        }\n\n        /* Element: Modal footer */\n        .modal__footer {\n          padding: 12px 14px;\n          border-top: 1px solid var(--modal-panel-border);\n          display: flex;\n          gap: 8px;\n          justify-content: flex-end;\n          position: sticky;\n          bottom: 0;\n          background: var(--modal-footer-bg);\n          z-index: 1;\n        }\n\n        /* Slotted button styles (BEM classes) */\n        ::slotted(.modal__button) {\n          appearance: none;\n          border: 0;\n          border-radius: 10px;\n          padding: 10px 14px;\n          background: #1f2937;\n          color: #fff;\n          cursor: pointer;\n          font-size: 14px;\n          font-weight: 500;\n          transition: all var(--modal-animation-duration) ease;\n        }\n\n        ::slotted(.modal__button:hover) {\n          background: #374151;\n        }\n\n        ::slotted(.modal__button--primary) {\n          background: #60a5fa;\n          color: #0b1020;\n          font-weight: 700;\n        }\n\n        ::slotted(.modal__button--primary:hover) {\n          background: #3b82f6;\n        }\n\n        ::slotted(.modal__button--danger) {\n          background: #dc2626;\n          color: white;\n        }\n\n        ::slotted(.modal__button--danger:hover) {\n          background: #b91c1c;\n        }\n\n        ::slotted(.modal__button:disabled) {\n          opacity: 0.5;\n          cursor: not-allowed;\n        }\n\n        /* Animations */\n        @keyframes modal-fade-in {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n\n        @keyframes modal-backdrop-in {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n\n        @keyframes modal-panel-in {\n          from { \n            opacity: 0;\n            transform: translate(-50%, -50%) scale(0.95);\n          }\n          to { \n            opacity: 1;\n            transform: translate(-50%, -50%) scale(1);\n          }\n        }\n\n        /* Reduced motion support */\n        @media (prefers-reduced-motion: reduce) {\n          :host([open]),\n          .modal__backdrop,\n          .modal__panel,\n          .modal__close,\n          ::slotted(.modal__button) {\n            animation: none;\n            transition: none;\n          }\n        }\n\n        /* Dark mode adjustments */\n        @media (prefers-color-scheme: light) {\n          :host {\n            --modal-panel-bg: white;\n            --modal-panel-color: #1f2937;\n            --modal-panel-border: rgba(0, 0, 0, 0.1);\n            --modal-header-bg: white;\n            --modal-footer-bg: white;\n            --modal-close-hover-bg: rgba(0, 0, 0, 0.1);\n          }\n\n          ::slotted(.modal__button) {\n            background: #f3f4f6;\n            color: #1f2937;\n          }\n\n          ::slotted(.modal__button:hover) {\n            background: #e5e7eb;\n          }\n        }\n      </style>\n      \n      <div class=\"modal__backdrop\" part=\"backdrop\"></div>\n      <div class=\"modal__panel\" part=\"panel\" role=\"dialog\" aria-modal=\"true\">\n        <header class=\"modal__header\" part=\"header\">\n          <slot name=\"title\"><h2>Dialog</h2></slot>\n          <div class=\"modal__spacer\"></div>\n          <button class=\"modal__close\" aria-label=\"Close\" part=\"close\">Ã—</button>\n        </header>\n        <section class=\"modal__content\" part=\"content\">\n          <slot></slot>\n        </section>\n        <footer class=\"modal__footer\" part=\"footer\">\n          <slot name=\"actions\"></slot>\n        </footer>\n      </div>\n    `;\n\n    // Store element references using BEM naming\n    this._elements = {\n      backdrop: root.querySelector('.modal__backdrop'),\n      panel: root.querySelector('.modal__panel'),\n      close: root.querySelector('.modal__close'),\n    };\n\n    // Bind event handlers\n    this._onKeydown = this._onKeydown.bind(this);\n    this._onFocus = this._onFocus.bind(this);\n  }\n\n  connectedCallback() {\n    this._upgradeProperty('open');\n\n    // Set up event listeners\n    this._elements.backdrop.addEventListener('click', () => {\n      if (this._isBackdropClosable()) {\n        this.close();\n      }\n    });\n\n    this._elements.close.addEventListener('click', () => {\n      if (this._isClosable()) {\n        this.close();\n      }\n    });\n\n    // Global event listeners\n    document.addEventListener('keydown', this._onKeydown);\n    this.addEventListener('focusin', this._onFocus);\n\n    // Set ARIA attributes\n    this._elements.panel.setAttribute('aria-labelledby', this._getTitleId());\n  }\n\n  disconnectedCallback() {\n    document.removeEventListener('keydown', this._onKeydown);\n    this.removeEventListener('focusin', this._onFocus);\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === 'open') {\n      if (this.hasAttribute('open')) {\n        this._onOpen();\n      } else {\n        this._onClose();\n      }\n    }\n  }\n\n  /**\n   * Open the modal\n   */\n  open() {\n    this.setAttribute('open', '');\n  }\n\n  /**\n   * Close the modal\n   */\n  close() {\n    this.removeAttribute('open');\n  }\n\n  /**\n   * Toggle modal open/closed state\n   * @param {boolean} [force] - Force open (true) or close (false)\n   */\n  toggle(force) {\n    if (force === true) {\n      this.open();\n    } else if (force === false) {\n      this.close();\n    } else {\n      this.hasAttribute('open') ? this.close() : this.open();\n    }\n  }\n\n  /**\n   * Check if modal can be closed\n   * @private\n   * @returns {boolean}\n   */\n  _isClosable() {\n    return this.getAttribute('data-modal-closable') !== 'false';\n  }\n\n  /**\n   * Check if modal can be closed by clicking backdrop\n   * @private\n   * @returns {boolean}\n   */\n  _isBackdropClosable() {\n    return this._isClosable() && this.getAttribute('data-modal-backdrop-close') !== 'false';\n  }\n\n  /**\n   * Check if keyboard navigation is enabled\n   * @private\n   * @returns {boolean}\n   */\n  _isKeyboardEnabled() {\n    return this.getAttribute('data-modal-keyboard') !== 'false';\n  }\n\n  /**\n   * Handle modal opening\n   * @private\n   */\n  _onOpen() {\n    // Dispatch open event\n    this.dispatchEvent(new CustomEvent('modal:open', {\n      bubbles: true,\n      detail: { modal: this }\n    }));\n\n    // Focus management\n    requestAnimationFrame(() => {\n      const firstFocusable = this._getFirstFocusable();\n      const focusTarget = firstFocusable || this._elements.close;\n      focusTarget.focus({ preventScroll: true });\n    });\n\n    // Prevent body scroll\n    document.body.style.overflow = 'hidden';\n  }\n\n  /**\n   * Handle modal closing\n   * @private\n   */\n  _onClose() {\n    // Dispatch close event\n    this.dispatchEvent(new CustomEvent('modal:close', {\n      bubbles: true,\n      detail: { modal: this }\n    }));\n\n    // Restore body scroll\n    document.body.style.overflow = '';\n  }\n\n  /**\n   * Handle keyboard events\n   * @private\n   * @param {KeyboardEvent} event\n   */\n  _onKeydown(event) {\n    if (!this.hasAttribute('open') || !this._isKeyboardEnabled()) return;\n\n    if (event.key === 'Escape' && this._isClosable()) {\n      event.preventDefault();\n      this.close();\n    }\n\n    if (event.key === 'Tab') {\n      this._trapTab(event);\n    }\n  }\n\n  /**\n   * Handle focus events for focus trapping\n   * @private\n   */\n  _onFocus() {\n    if (!this.contains(document.activeElement)) {\n      const focusTarget = this._getFirstFocusable() || this._elements.close;\n      focusTarget.focus({ preventScroll: true });\n    }\n  }\n\n  /**\n   * Get all focusable elements within the modal\n   * @private\n   * @returns {HTMLElement[]}\n   */\n  _getFocusableElements() {\n    const selectors = [\n      'a[href]',\n      'button:not([disabled])',\n      'input:not([disabled])',\n      'select:not([disabled])',\n      'textarea:not([disabled])',\n      '[tabindex]:not([tabindex=\"-1\"]):not([disabled])'\n    ];\n\n    return [...this.querySelectorAll(selectors.join(','))];\n  }\n\n  /**\n   * Get the first focusable element\n   * @private\n   * @returns {HTMLElement|null}\n   */\n  _getFirstFocusable() {\n    return this._getFocusableElements()[0] || null;\n  }\n\n  /**\n   * Trap tab navigation within the modal\n   * @private\n   * @param {KeyboardEvent} event\n   */\n  _trapTab(event) {\n    const focusableElements = this._getFocusableElements();\n    if (!focusableElements.length) return;\n\n    const firstElement = focusableElements[0];\n    const lastElement = focusableElements[focusableElements.length - 1];\n    const activeElement = this.contains(document.activeElement) ? document.activeElement : null;\n\n    if (event.shiftKey) {\n      // Shift + Tab\n      if (activeElement === firstElement || !activeElement) {\n        lastElement.focus();\n        event.preventDefault();\n      }\n    } else {\n      // Tab\n      if (activeElement === lastElement) {\n        firstElement.focus();\n        event.preventDefault();\n      }\n    }\n  }\n\n  /**\n   * Get title element ID for ARIA labeling\n   * @private\n   * @returns {string}\n   */\n  _getTitleId() {\n    const titleSlot = this.querySelector('[slot=\"title\"]');\n    if (titleSlot && titleSlot.id) {\n      return titleSlot.id;\n    }\n    return 'modal-title';\n  }\n\n  /**\n   * Upgrade property for proper web component behavior\n   * @private\n   * @param {string} prop\n   */\n  _upgradeProperty(prop) {\n    if (this.hasOwnProperty(prop)) {\n      const value = this[prop];\n      delete this[prop];\n      this[prop] = value;\n    }\n  }\n}\n\n// Auto-register the web component if not already registered\nif (!customElements.get('x-modal')) {\n  customElements.define('x-modal', XModal);\n}","import { BaseComponent } from '../core/BaseComponent.js';\n\nexport class LazyImage extends BaseComponent {\n  static get defaults() {\n    return {\n      threshold: '200px',\n      fadeIn: true,\n      retryAttempts: 3,\n      retryDelay: 1000,\n      placeholderClass: 'lazy-image--loading',\n      loadedClass: 'lazy-image--loaded',\n      errorClass: 'lazy-image--error'\n    };\n  }\n\n  _init(element) {\n    const state = super._init(element);\n\n    const src = this._getDataAttr(element, 'lazyimage-src');\n    const threshold = this._getDataAttr(element, 'lazyimage-threshold', LazyImage.defaults.threshold);\n    const fadeIn = this._getDataAttr(element, 'lazyimage-fadein', LazyImage.defaults.fadeIn);\n\n    if (!src) {\n      this.logger?.warn('LazyImage: No data-lazyimage-src attribute found', element);\n      return state;\n    }\n\n    element.classList.add(LazyImage.defaults.placeholderClass);\n\n    const observer = new IntersectionObserver((entries) => {\n      for (const entry of entries) {\n        if (entry.isIntersecting) {\n          this._loadImage(element, src, { fadeIn });\n          observer.disconnect();\n        }\n      }\n    }, {\n      rootMargin: threshold,\n      threshold: 0.1\n    });\n\n    observer.observe(element);\n\n    state.observer = observer;\n    state.src = src;\n    state.loaded = false;\n\n    const originalCleanup = state.cleanup;\n    state.cleanup = () => {\n      observer.disconnect();\n      originalCleanup();\n    };\n\n    this.logger?.info('LazyImage initialized', { element, src, threshold });\n\n    return state;\n  }\n\n  _loadImage(element, src, { fadeIn }) {\n    const img = new Image();\n\n    img.onload = () => {\n      const state = this.getState(element);\n      if (!state || state.loaded) return;\n\n      state.loaded = true;\n      element.src = src;\n\n      element.classList.remove(LazyImage.defaults.placeholderClass, LazyImage.defaults.errorClass);\n      element.classList.add(LazyImage.defaults.loadedClass);\n\n      if (fadeIn) {\n        element.style.opacity = '0';\n        element.style.transition = 'opacity 0.3s ease-in-out';\n        requestAnimationFrame(() => {\n          element.style.opacity = '1';\n        });\n      }\n\n      this._dispatch(element, 'lazy:loaded', { src });\n      this.eventBus?.emit('lazy-image:loaded', { element, src });\n\n      this.logger?.info('LazyImage: Successfully loaded', { element, src });\n    };\n\n    img.onerror = () => {\n      element.classList.remove(LazyImage.defaults.placeholderClass);\n      element.classList.add(LazyImage.defaults.errorClass);\n\n      this._dispatch(element, 'lazy:error', { src });\n      this.eventBus?.emit('lazy-image:error', { element, src });\n\n      this.logger?.error('LazyImage: Failed to load', { element, src });\n    };\n\n    img.src = src;\n  }\n\n  static enhanceAll(selector = '[data-lazyimage][data-lazyimage-src]', options) {\n    const instance = new LazyImage(options);\n    const elements = document.querySelectorAll(selector);\n\n    elements.forEach(element => {\n      instance.mount(element);\n    });\n\n    return instance;\n  }\n}","/**\n * Modal - Modal dialog enhancement component\n * Works with XModal web component and data attributes for modal triggers\n * Follows new naming conventions: data-modal-* attributes\n *\n * @example\n * HTML:\n * <button data-modal data-modal-target=\"#example-modal\">Open Modal</button>\n *\n * <x-modal id=\"example-modal\"\n *          data-modal-size=\"large\"\n *          data-modal-closable=\"true\">\n *   <h2 slot=\"title\">Modal Title</h2>\n *   <p>Modal content goes here.</p>\n *   <div slot=\"actions\">\n *     <button class=\"modal__button modal__button--secondary\" data-modal-close>Cancel</button>\n *     <button class=\"modal__button modal__button--primary\">Save</button>\n *   </div>\n * </x-modal>\n *\n * JavaScript (standalone):\n * import { Modal } from './components/Modal.js';\n * const modals = new Modal();\n * document.querySelectorAll('[data-modal]')\n *   .forEach(trigger => modals.mount(trigger));\n */\n\nimport { BaseComponent } from '../core/BaseComponent.js';\nimport { XModal } from './XModal.js';\n\nexport class Modal extends BaseComponent {\n    /**\n     * Default options for modal enhancement\n     */\n    static get defaults() {\n        return {\n            size: 'medium',              // Modal size: small, medium, large, fullscreen\n            closable: true,              // Whether modal can be closed\n            backdropClose: true,         // Close on backdrop click\n            keyboard: true,              // Enable keyboard navigation\n            focus: true,                 // Auto-focus when opened\n            multiple: false,             // Allow multiple modals\n            appendTo: 'body'             // Where to append modal elements\n        };\n    }\n\n    /**\n     * Initialize modal enhancement for a trigger element\n     * @protected\n     * @param {HTMLElement} element - Trigger element to enhance\n     * @returns {import('../core/BaseComponent.js').ComponentState} Component state\n     */\n    _init(element) {\n        const state = super._init(element);\n\n        // Get configuration from data attributes\n        const target = this._getDataAttr(element, 'modal-target');\n        const size = this._getDataAttr(element, 'modal-size', Modal.defaults.size);\n        const closable = this._getDataAttr(element, 'modal-closable', Modal.defaults.closable);\n        const backdropClose = this._getDataAttr(element, 'modal-backdrop-close', Modal.defaults.backdropClose);\n        const keyboard = this._getDataAttr(element, 'modal-keyboard', Modal.defaults.keyboard);\n        const focus = this._getDataAttr(element, 'modal-focus', Modal.defaults.focus);\n        const multiple = this._getDataAttr(element, 'modal-multiple', Modal.defaults.multiple);\n\n        if (!target) {\n            this.logger?.warn('Modal: No data-modal-target attribute found', element);\n            return state;\n        }\n\n        // Find or create target modal\n        let modalElement = document.querySelector(target);\n        if (!modalElement) {\n            this.logger?.warn('Modal: Target modal not found', {target, element});\n            return state;\n        }\n\n        // Ensure it's an x-modal element\n        if (modalElement.tagName.toLowerCase() !== 'x-modal') {\n            this.logger?.warn('Modal: Target is not an x-modal element', {target, element});\n            return state;\n        }\n\n        // Configure modal attributes\n        this._configureModal(modalElement, {\n            size,\n            closable,\n            backdropClose,\n            keyboard\n        });\n\n        // Store state\n        state.target = target;\n        state.modalElement = modalElement;\n        state.size = size;\n        state.closable = closable;\n        state.backdropClose = backdropClose;\n        state.keyboard = keyboard;\n        state.focus = focus;\n        state.multiple = multiple;\n\n        // Set up event listeners\n        element.addEventListener('click', this._handleTriggerClick.bind(this, element), {\n            signal: state.controller.signal\n        });\n\n        // Listen for modal events\n        modalElement.addEventListener('modal:open', this._handleModalOpen.bind(this, element), {\n            signal: state.controller.signal\n        });\n\n        modalElement.addEventListener('modal:close', this._handleModalClose.bind(this, element), {\n            signal: state.controller.signal\n        });\n\n        // Set up ARIA attributes\n        element.setAttribute('aria-haspopup', 'dialog');\n        element.setAttribute('aria-expanded', 'false');\n        if (!element.getAttribute('aria-controls')) {\n            element.setAttribute('aria-controls', target.replace('#', ''));\n        }\n\n        this.logger?.info('Modal trigger initialized', {\n            element,\n            target,\n            size,\n            closable\n        });\n\n        return state;\n    }\n\n    /**\n     * Open a modal\n     * @param {HTMLElement} triggerElement - Trigger element\n     */\n    open(triggerElement) {\n        const state = this.getState(triggerElement);\n        if (!state?.modalElement) return;\n\n        // Close other modals if multiple is not allowed\n        if (!state.multiple) {\n            this._closeOtherModals(state.modalElement);\n        }\n\n        // Store the trigger element for focus restoration\n        state.modalElement._triggerElement = triggerElement;\n\n        // Open the modal\n        state.modalElement.open();\n    }\n\n    /**\n     * Close a modal\n     * @param {HTMLElement} triggerElement - Trigger element\n     */\n    close(triggerElement) {\n        const state = this.getState(triggerElement);\n        if (!state?.modalElement) return;\n\n        state.modalElement.close();\n    }\n\n    /**\n     * Toggle a modal\n     * @param {HTMLElement} triggerElement - Trigger element\n     * @param {boolean} [force] - Force open (true) or close (false)\n     */\n    toggle(triggerElement, force) {\n        const state = this.getState(triggerElement);\n        if (!state?.modalElement) return;\n\n        if (force === true) {\n            this.open(triggerElement);\n        } else if (force === false) {\n            this.close(triggerElement);\n        } else {\n            if (state.modalElement.hasAttribute('open')) {\n                this.close(triggerElement);\n            } else {\n                this.open(triggerElement);\n            }\n        }\n    }\n\n    /**\n     * Check if a modal is open\n     * @param {HTMLElement} triggerElement - Trigger element\n     * @returns {boolean} Whether modal is open\n     */\n    isOpen(triggerElement) {\n        const state = this.getState(triggerElement);\n        return state?.modalElement?.hasAttribute('open') || false;\n    }\n\n    /**\n     * Configure modal element with data attributes\n     * @private\n     * @param {XModal} modalElement - Modal element\n     * @param {Object} config - Configuration object\n     */\n    _configureModal(modalElement, config) {\n        if (config.size) {\n            modalElement.setAttribute('data-modal-size', config.size);\n        }\n\n        if (config.closable !== undefined) {\n            modalElement.setAttribute('data-modal-closable', String(config.closable));\n        }\n\n        if (config.backdropClose !== undefined) {\n            modalElement.setAttribute('data-modal-backdrop-close', String(config.backdropClose));\n        }\n\n        if (config.keyboard !== undefined) {\n            modalElement.setAttribute('data-modal-keyboard', String(config.keyboard));\n        }\n    }\n\n    /**\n     * Handle trigger click\n     * @private\n     * @param {HTMLElement} triggerElement - Trigger element\n     * @param {Event} event - Click event\n     */\n    _handleTriggerClick(triggerElement, event) {\n        event.preventDefault();\n        this.open(triggerElement);\n    }\n\n    /**\n     * Handle modal open event\n     * @private\n     * @param {HTMLElement} triggerElement - Trigger element\n     * @param {CustomEvent} event - Modal open event\n     */\n    _handleModalOpen(triggerElement, event) {\n        // Update ARIA attributes\n        triggerElement.setAttribute('aria-expanded', 'true');\n\n        // Dispatch enhancement event\n        this._dispatch(triggerElement, 'modal:opened', {\n            trigger: triggerElement,\n            modal: event.detail.modal\n        });\n\n        // Emit to event bus if available\n        this.eventBus?.emit('modal:opened', {\n            trigger: triggerElement,\n            modal: event.detail.modal\n        });\n\n        this.logger?.info('Modal opened', {triggerElement, modal: event.detail.modal});\n    }\n\n    /**\n     * Handle modal close event\n     * @private\n     * @param {HTMLElement} triggerElement - Trigger element\n     * @param {CustomEvent} event - Modal close event\n     */\n    _handleModalClose(triggerElement, event) {\n        // Update ARIA attributes\n        triggerElement.setAttribute('aria-expanded', 'false');\n\n        // Restore focus to trigger\n        const state = this.getState(triggerElement);\n        if (state?.focus && event.detail.modal._triggerElement) {\n            requestAnimationFrame(() => {\n                event.detail.modal._triggerElement.focus();\n            });\n        }\n\n        // Dispatch enhancement event\n        this._dispatch(triggerElement, 'modal:closed', {\n            trigger: triggerElement,\n            modal: event.detail.modal\n        });\n\n        // Emit to event bus if available\n        this.eventBus?.emit('modal:closed', {\n            trigger: triggerElement,\n            modal: event.detail.modal\n        });\n\n        this.logger?.info('Modal closed', {triggerElement, modal: event.detail.modal});\n    }\n\n    /**\n     * Close other open modals\n     * @private\n     * @param {XModal} currentModal - Current modal to keep open\n     */\n    _closeOtherModals(currentModal) {\n        const openModals = document.querySelectorAll('x-modal[open]');\n        openModals.forEach(modal => {\n            if (modal !== currentModal) {\n                modal.close();\n            }\n        });\n    }\n\n    /**\n     * Update modal configuration\n     * @param {HTMLElement} triggerElement - Trigger element\n     * @param {Object} newConfig - New configuration\n     */\n    updateConfig(triggerElement, newConfig) {\n        const state = this.getState(triggerElement);\n        if (!state?.modalElement) return;\n\n        // Update state\n        Object.assign(state, newConfig);\n\n        // Update modal element\n        this._configureModal(state.modalElement, newConfig);\n\n        this.logger?.info('Modal configuration updated', {triggerElement, newConfig});\n    }\n\n    /**\n     * Static method to enhance all modal triggers on the page\n     * @param {string} [selector='[data-modal][data-modal-target]'] - CSS selector\n     * @param {Object} [options] - Component options\n     * @returns {Modal} Modal instance\n     */\n    static enhanceAll(selector = '[data-modal][data-modal-target]', options) {\n        const instance = new Modal(options);\n        const elements = document.querySelectorAll(selector);\n\n        elements.forEach(element => {\n            instance.mount(element);\n        });\n\n        return instance;\n    }\n\n    /**\n     * Static method to create a modal programmatically\n     * @param {Object} config - Modal configuration\n     * @param {string} config.title - Modal title\n     * @param {string} config.content - Modal content (HTML)\n     * @param {Array} [config.actions] - Action buttons\n     * @param {string} [config.size] - Modal size\n     * @param {Object} [config.options] - Additional options\n     * @returns {Promise<XModal>} Modal element\n     */\n    static async create({\n                            title,\n                            content,\n                            actions = [],\n                            size = 'medium',\n                            options = {}\n                        }) {\n        // Create modal element\n        const modal = document.createElement('x-modal');\n        modal.id = `modal-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n\n        // Configure attributes\n        modal.setAttribute('data-modal-size', size);\n        Object.entries(options).forEach(([key, value]) => {\n            modal.setAttribute(`data-modal-${key}`, String(value));\n        });\n\n        // Create title\n        if (title) {\n            const titleElement = document.createElement('h2');\n            titleElement.slot = 'title';\n            titleElement.textContent = title;\n            modal.appendChild(titleElement);\n        }\n\n        // Create content\n        if (content) {\n            const contentElement = document.createElement('div');\n            contentElement.innerHTML = content;\n            modal.appendChild(contentElement);\n        }\n\n        // Create actions\n        if (actions.length > 0) {\n            const actionsContainer = document.createElement('div');\n            actionsContainer.slot = 'actions';\n\n            actions.forEach(action => {\n                const button = document.createElement('button');\n                button.className = `modal__button modal__button--${action.type || 'secondary'}`;\n                button.textContent = action.label;\n\n                if (action.close !== false) {\n                    button.setAttribute('data-modal-close', '');\n                }\n\n                if (action.onClick) {\n                    button.addEventListener('click', action.onClick);\n                }\n\n                actionsContainer.appendChild(button);\n            });\n\n            modal.appendChild(actionsContainer);\n        }\n\n        // Append to document\n        document.body.appendChild(modal);\n    }\n}"],"names":["EventManager","constructor","listeners","Map","on","event","callback","has","set","Set","get","add","off","once","unsubscribe","payload","delete","size","emit","listenersCopy","error","console","clear","DevLogger","namespace","enabled","setEnabled","Boolean","_getPrefix","level","Date","toISOString","log","args","info","warn","child","subNamespace","BaseComponent","options","eventBus","logger","elements","WeakMap","_elementKeys","mount","element","update","state","_init","unmount","cleanup","getState","controller","AbortController","abort","_getDataAttr","name","defaultValue","value","getAttribute","numValue","Number","isNaN","isFinite","_dispatch","eventName","detail","bubbles","CustomEvent","cancelable","dispatchEvent","XToasts","HTMLElement","root","attachShadow","mode","innerHTML","_container","getElementById","_idCounter","_toasts","toast","message","type","timeout","allowHTML","id","document","createElement","className","setAttribute","row","messageElement","textContent","closeButton","appendChild","isRemoved","dismiss","style","animation","setTimeout","remove","addEventListener","customElements","define","AlertManager","placement","container","toastElement","_getOrCreateToastElement","_setupEventForwarding","success","body","querySelector","events","forEach","split","notify","_globalInstance","XModal","observedAttributes","_elements","backdrop","panel","close","_onKeydown","bind","_onFocus","connectedCallback","_upgradeProperty","_isBackdropClosable","_isClosable","_getTitleId","disconnectedCallback","removeEventListener","attributeChangedCallback","oldValue","newValue","hasAttribute","_onOpen","_onClose","open","removeAttribute","toggle","force","_isKeyboardEnabled","modal","requestAnimationFrame","firstFocusable","_getFirstFocusable","focusTarget","focus","preventScroll","overflow","key","preventDefault","_trapTab","contains","activeElement","_getFocusableElements","selectors","querySelectorAll","join","focusableElements","length","firstElement","lastElement","shiftKey","titleSlot","prop","hasOwnProperty","LazyImage","defaults","threshold","fadeIn","retryAttempts","retryDelay","placeholderClass","loadedClass","errorClass","src","classList","observer","IntersectionObserver","entries","entry","isIntersecting","_loadImage","disconnect","rootMargin","observe","loaded","originalCleanup","img","Image","onload","opacity","transition","onerror","enhanceAll","selector","instance","Modal","closable","backdropClose","keyboard","multiple","appendTo","target","modalElement","tagName","toLowerCase","_configureModal","_handleTriggerClick","signal","_handleModalOpen","_handleModalClose","replace","triggerElement","_closeOtherModals","_triggerElement","isOpen","config","undefined","String","trigger","currentModal","openModals","updateConfig","newConfig","Object","assign","create","title","content","actions","now","Math","random","toString","substr","titleElement","slot","contentElement","actionsContainer","action","button","label","onClick"],"mappings":"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C,CAAC;;AAEhD;IACAF,IAAI,CAACG,SAAS,GAAG;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAA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"}