{"version":3,"file":"index.umd.js","sources":["../src/core/EventManager.js","../src/core/DevLogger.js","../src/core/BaseComponent.js","../src/components/XToasts.js","../src/managers/AlertManager.js","../src/components/XModal.js","../src/components/LazyImage.js","../src/components/Modal.js"],"sourcesContent":["export class EventManager {\n  constructor() {\n    this.listeners = new Map();\n  }\n\n  on(event, callback) {\n    if (!this.listeners.has(event)) {\n      this.listeners.set(event, new Set());\n    }\n    const listeners = this.listeners.get(event);\n    listeners.add(callback);\n    return () => this.off(event, callback);\n  }\n\n  once(event, callback) {\n    const unsubscribe = this.on(event, (payload) => {\n      unsubscribe();\n      callback(payload);\n    });\n    return unsubscribe;\n  }\n\n  off(event, callback) {\n    const listeners = this.listeners.get(event);\n    if (listeners) {\n      listeners.delete(callback);\n      if (listeners.size === 0) {\n        this.listeners.delete(event);\n      }\n    }\n  }\n\n  emit(event, payload) {\n    const listeners = this.listeners.get(event);\n    if (!listeners) return;\n    const listenersCopy = [...listeners];\n    for (const callback of listenersCopy) {\n      try {\n        callback(payload);\n      } catch (error) {\n        console.error(`[EventManager] Error in listener for \"${event}\":`, error);\n      }\n    }\n  }\n\n  clear(event) {\n    if (event) {\n      this.listeners.delete(event);\n    } else {\n      this.listeners.clear();\n    }\n  }\n}","export class DevLogger {\n  constructor(namespace, enabled = false) {\n    this.namespace = namespace;\n    this.enabled = enabled;\n  }\n\n  setEnabled(enabled) {\n    this.enabled = Boolean(enabled);\n  }\n\n  _getPrefix(level) {\n    return `${new Date().toISOString()} [${this.namespace}] ${level}:`;\n  }\n\n  log(...args) {\n    if (this.enabled) {\n      console.log(this._getPrefix('LOG'), ...args);\n    }\n  }\n\n  info(...args) {\n    if (this.enabled) {\n      console.info(this._getPrefix('INFO'), ...args);\n    }\n  }\n\n  warn(...args) {\n    if (this.enabled) {\n      console.warn(this._getPrefix('WARN'), ...args);\n    }\n  }\n\n  error(...args) {\n    console.error(this._getPrefix('ERROR'), ...args);\n  }\n\n  child(subNamespace) {\n    return new DevLogger(`${this.namespace}:${subNamespace}`, this.enabled);\n  }\n}\n\nexport function createLogger(namespace, forceEnabled) {\n  if (forceEnabled !== undefined) {\n    return new DevLogger(namespace, forceEnabled);\n  }\n  const isDebugMode =\n    (typeof window !== 'undefined' && window.location?.search?.includes('debug=1')) ||\n    (typeof localStorage !== 'undefined' && localStorage.getItem('app:debug') === '1');\n  return new DevLogger(namespace, isDebugMode);\n}","export class BaseComponent {\n  constructor(options = {}) {\n    this.eventBus = options.eventBus;\n    this.logger = options.logger;\n    this.elements = new WeakMap();\n    this._elementKeys = new Set();\n  }\n\n  mount(element) {\n    if (this.elements.has(element)) {\n      return this.update(element);\n    }\n    try {\n      const state = this._init(element);\n      this.elements.set(element, state);\n      this._elementKeys.add(element);\n      this.logger?.info('Component mounted', element);\n    } catch (error) {\n      this.logger?.error('Failed to mount component', error);\n    }\n  }\n\n  update(element) {\n    const state = this.elements.get(element);\n    if (!state) return;\n    this.logger?.info('Component updated', element);\n  }\n\n  unmount(element) {\n    const state = this.elements.get(element);\n    if (!state) return;\n    try {\n      state.cleanup();\n      this.elements.delete(element);\n      this._elementKeys.delete(element);\n    } catch (error) {\n      this.logger?.error('Failed to unmount component', error);\n    }\n  }\n\n  getState(element) {\n    return this.elements.get(element);\n  }\n\n  _init(element) {\n    const controller = new AbortController();\n    return { cleanup: () => controller.abort(), controller };\n  }\n\n  _getDataAttr(element, name, defaultValue) {\n    const value = element.getAttribute(`data-${name}`);\n    if (value === null) return defaultValue;\n    if (value === 'true') return true;\n    if (value === 'false') return false;\n    if (value === '') return true;\n    const numValue = Number(value);\n    if (!isNaN(numValue) && isFinite(numValue)) return numValue;\n    return value;\n  }\n\n  _dispatch(element, eventName, detail, bubbles = true) {\n    const event = new CustomEvent(eventName, { detail, bubbles, cancelable: true });\n    return element.dispatchEvent(event);\n  }\n}","export class XToasts extends HTMLElement {\n  constructor() {\n    super();\n    const root = this.attachShadow({ mode: 'open' });\n\n    root.innerHTML = `\n      <style>  \n        :host {\n          position: fixed;\n          inset: auto auto auto 0;\n          padding: 12px;\n          z-index: 2147483647;\n          display: grid;\n          gap: 8px;\n          pointer-events: none;\n        }\n        \n        :host([placement=\"top-left\"]) { top: 0; left: 0; }\n        :host([placement=\"top-right\"]) { top: 0; right: 0; left: auto; }\n        :host([placement=\"bottom-right\"]) { bottom: 0; right: 0; left: auto; }\n        :host([placement=\"bottom-left\"]) { bottom: 0; left: 0; }\n        \n        .toast {\n          padding: 10px 12px;\n          border-radius: 8px;\n          color: #fff;\n          box-shadow: 0 6px 20px rgba(0,0,0,.25);\n          opacity: 0;\n          transform: translateY(-6px);\n          animation: toast-in 0.18s ease-out forwards;\n          cursor: pointer;\n          font: 14px/1.4 system-ui, -apple-system, sans-serif;\n          outline: none;\n          pointer-events: auto;\n          min-width: 300px;\n        }\n        \n        .toast.info { background: #111827; }\n        .toast.success { background: #065f46; }\n        .toast.warn { background: #7c2d12; }\n        .toast.error { background: #7f1d1d; }\n        \n        @keyframes toast-in { \n          to { opacity: 1; transform: none; } \n        }\n        \n        .row {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n        \n        .msg {\n          white-space: pre-wrap;\n          flex: 1;\n        }\n        \n        button.close {\n          all: unset;\n          display: inline-flex;\n          align-items: center;\n          justify-content: center;\n          width: 24px;\n          height: 24px;\n          border-radius: 6px;\n          font-weight: 700;\n          background: rgba(255,255,255,0.1);\n        }\n        \n        button.close:hover {\n          background: rgba(255,255,255,0.2);\n        }\n      </style>  \n      <div id=\"container\" role=\"region\" aria-live=\"polite\"></div>\n    `;\n\n    this._container = root.getElementById('container');\n    this._idCounter = 0;\n    this._toasts = new Map();\n  }\n\n  toast({ message, type = 'info', timeout = 4000, allowHTML = false }) {\n    const id = ++this._idCounter;\n\n    const element = document.createElement('div');\n    element.className = `toast ${type}`;\n    element.setAttribute('role', type === 'warn' || type === 'error' ? 'alert' : 'status');\n\n    const row = document.createElement('div');\n    row.className = 'row';\n\n    const messageElement = document.createElement('span');\n    messageElement.className = 'msg';\n    if (allowHTML) {\n      messageElement.innerHTML = message;\n    } else {\n      messageElement.textContent = message;\n    }\n\n    const closeButton = document.createElement('button');\n    closeButton.className = 'close';\n    closeButton.setAttribute('aria-label', 'Dismiss notification');\n    closeButton.textContent = '×';\n\n    row.appendChild(messageElement);\n    row.appendChild(closeButton);\n    element.appendChild(row);\n    this._container.appendChild(element);\n\n    let isRemoved = false;\n    const dismiss = () => {\n      if (isRemoved) return;\n      isRemoved = true;\n\n      element.style.animation = 'toast-out 0.15s ease-in forwards';\n      setTimeout(() => element.remove(), 150);\n      this._toasts.delete(id);\n\n      this.dispatchEvent(new CustomEvent('toast:close', {\n        detail: { id, type, message },\n        bubbles: true\n      }));\n    };\n\n    closeButton.addEventListener('click', dismiss);\n\n    if (timeout > 0) {\n      setTimeout(dismiss, timeout);\n    }\n\n    this._toasts.set(id, { element, type, dismiss });\n\n    this.dispatchEvent(new CustomEvent('toast:show', {\n      detail: { id, type, message },\n      bubbles: true\n    }));\n\n    return dismiss;\n  }\n}\n\nif (!customElements.get('x-toasts')) {\n  customElements.define('x-toasts', XToasts);\n}","import { XToasts } from '../components/XToasts.js';\n\nexport class AlertManager {\n  constructor({ logger, eventBus, placement = 'top-right', container } = {}) {\n    this.logger = logger;\n    this.eventBus = eventBus;\n    this.toastElement = this._getOrCreateToastElement(placement, container);\n    this._setupEventForwarding();\n    this.logger?.info('AlertManager initialized', { placement });\n  }\n\n  info(message, options = {}) {\n    return this.toast({ message, type: 'info', ...options });\n  }\n\n  success(message, options = {}) {\n    return this.toast({ message, type: 'success', ...options });\n  }\n\n  warn(message, options = {}) {\n    return this.toast({ message, type: 'warn', ...options });\n  }\n\n  error(message, options = {}) {\n    return this.toast({ message, type: 'error', timeout: 6000, ...options });\n  }\n\n  toast(options) {\n    const dismiss = this.toastElement.toast(options);\n    this.logger?.info('Toast shown', options);\n    return dismiss;\n  }\n\n  _getOrCreateToastElement(placement, container = document.body) {\n    let toastElement = document.querySelector('x-toasts');\n    if (!toastElement) {\n      toastElement = document.createElement('x-toasts');\n      container.appendChild(toastElement);\n      this.logger?.info('Created new x-toasts element');\n    }\n    toastElement.setAttribute('placement', placement);\n    return toastElement;\n  }\n\n  _setupEventForwarding() {\n    if (!this.eventBus) return;\n    const events = ['toast:show', 'toast:close', 'toast:action'];\n    events.forEach(eventName => {\n      this.toastElement.addEventListener(eventName, (event) => {\n        this.eventBus.emit(`alerts:${eventName.split(':')[1]}`, event.detail);\n      });\n    });\n  }\n\n  static notify(message, type = 'info', options = {}) {\n    if (!AlertManager._globalInstance) {\n      AlertManager._globalInstance = new AlertManager();\n    }\n    return AlertManager._globalInstance.toast({ message, type, ...options });\n  }\n}","/**\n * XModal - Modal dialog web component\n * Can be used standalone without the framework\n * Follows new naming conventions: data-modal-* attributes and BEM CSS classes\n *\n * @example\n * import './components/XModal.js';\n *\n * HTML:\n * <button data-modal data-modal-target=\"#example-modal\">Open Modal</button>\n *\n * <x-modal id=\"example-modal\"\n *          data-modal-closable=\"true\"\n *          data-modal-backdrop-close=\"true\"\n *          data-modal-keyboard=\"true\">\n *   <h2 slot=\"title\">Modal Title</h2>\n *   <p>Modal content goes here.</p>\n *   <div slot=\"actions\">\n *     <button class=\"modal__button modal__button--secondary\" data-modal-close>Cancel</button>\n *     <button class=\"modal__button modal__button--primary\">Save</button>\n *   </div>\n * </x-modal>\n */\n\nexport class XModal extends HTMLElement {\n  static get observedAttributes() {\n    return ['open', 'data-modal-size', 'data-modal-closable'];\n  }\n\n  constructor() {\n    super();\n    const root = this.attachShadow({ mode: 'open' });\n\n    // Use BEM-style CSS with CSS custom properties for theming\n    root.innerHTML = `\n      <style>\n        :host {\n          --modal-backdrop-bg: rgba(0, 0, 0, 0.45);\n          --modal-panel-bg: #0f172a;\n          --modal-panel-color: #e5e7eb;\n          --modal-panel-border: rgba(255, 255, 255, 0.08);\n          --modal-panel-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n          --modal-panel-radius: 16px;\n          --modal-header-bg: #0f172a;\n          --modal-footer-bg: #0f172a;\n          --modal-close-hover-bg: rgba(255, 255, 255, 0.1);\n          --modal-animation-duration: 0.2s;\n          --modal-animation-easing: ease-out;\n        }\n\n        /* Host states */\n        :host {\n          display: none;\n        }\n\n        :host([open]) {\n          display: block;\n          position: fixed;\n          inset: 0;\n          z-index: 9999;\n          animation: modal-fade-in var(--modal-animation-duration) var(--modal-animation-easing);\n        }\n\n        /* Block: Modal backdrop */\n        .modal__backdrop {\n          position: absolute;\n          inset: 0;\n          background: var(--modal-backdrop-bg);\n          animation: modal-backdrop-in var(--modal-animation-duration) var(--modal-animation-easing);\n        }\n\n        /* Block: Modal panel */\n        .modal__panel {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          min-width: min(92vw, 640px);\n          max-width: 92vw;\n          max-height: 86vh;\n          overflow: auto;\n          background: var(--modal-panel-bg);\n          color: var(--modal-panel-color);\n          border: 1px solid var(--modal-panel-border);\n          border-radius: var(--modal-panel-radius);\n          box-shadow: var(--modal-panel-shadow);\n          animation: modal-panel-in var(--modal-animation-duration) var(--modal-animation-easing);\n        }\n\n        /* Panel size modifiers */\n        :host([data-modal-size=\"small\"]) .modal__panel {\n          min-width: min(92vw, 400px);\n        }\n\n        :host([data-modal-size=\"large\"]) .modal__panel {\n          min-width: min(92vw, 800px);\n        }\n\n        :host([data-modal-size=\"fullscreen\"]) .modal__panel {\n          width: 100vw;\n          height: 100vh;\n          max-width: 100vw;\n          max-height: 100vh;\n          border-radius: 0;\n          transform: none;\n          top: 0;\n          left: 0;\n        }\n\n        /* Element: Modal header */\n        .modal__header {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding: 12px 14px;\n          border-bottom: 1px solid var(--modal-panel-border);\n          position: sticky;\n          top: 0;\n          background: var(--modal-header-bg);\n          z-index: 1;\n        }\n\n        .modal__header h2 {\n          margin: 0;\n          font-size: 18px;\n          line-height: 1.3;\n          font-weight: 600;\n        }\n\n        /* Element: Header spacer */\n        .modal__spacer {\n          flex: 1;\n        }\n\n        /* Element: Close button */\n        .modal__close {\n          all: unset;\n          display: inline-flex;\n          align-items: center;\n          justify-content: center;\n          width: 28px;\n          height: 28px;\n          border-radius: 8px;\n          cursor: pointer;\n          font-size: 16px;\n          font-weight: bold;\n          transition: background-color var(--modal-animation-duration) ease;\n        }\n\n        .modal__close:hover {\n          background: var(--modal-close-hover-bg);\n        }\n\n        .modal__close:focus-visible {\n          outline: 2px solid currentColor;\n          outline-offset: 2px;\n        }\n\n        /* Element: Modal content */\n        .modal__content {\n          padding: 14px;\n        }\n\n        /* Element: Modal footer */\n        .modal__footer {\n          padding: 12px 14px;\n          border-top: 1px solid var(--modal-panel-border);\n          display: flex;\n          gap: 8px;\n          justify-content: flex-end;\n          position: sticky;\n          bottom: 0;\n          background: var(--modal-footer-bg);\n          z-index: 1;\n        }\n\n        /* Slotted button styles (BEM classes) */\n        ::slotted(.modal__button) {\n          appearance: none;\n          border: 0;\n          border-radius: 10px;\n          padding: 10px 14px;\n          background: #1f2937;\n          color: #fff;\n          cursor: pointer;\n          font-size: 14px;\n          font-weight: 500;\n          transition: all var(--modal-animation-duration) ease;\n        }\n\n        ::slotted(.modal__button:hover) {\n          background: #374151;\n        }\n\n        ::slotted(.modal__button--primary) {\n          background: #60a5fa;\n          color: #0b1020;\n          font-weight: 700;\n        }\n\n        ::slotted(.modal__button--primary:hover) {\n          background: #3b82f6;\n        }\n\n        ::slotted(.modal__button--danger) {\n          background: #dc2626;\n          color: white;\n        }\n\n        ::slotted(.modal__button--danger:hover) {\n          background: #b91c1c;\n        }\n\n        ::slotted(.modal__button:disabled) {\n          opacity: 0.5;\n          cursor: not-allowed;\n        }\n\n        /* Animations */\n        @keyframes modal-fade-in {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n\n        @keyframes modal-backdrop-in {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n\n        @keyframes modal-panel-in {\n          from { \n            opacity: 0;\n            transform: translate(-50%, -50%) scale(0.95);\n          }\n          to { \n            opacity: 1;\n            transform: translate(-50%, -50%) scale(1);\n          }\n        }\n\n        /* Reduced motion support */\n        @media (prefers-reduced-motion: reduce) {\n          :host([open]),\n          .modal__backdrop,\n          .modal__panel,\n          .modal__close,\n          ::slotted(.modal__button) {\n            animation: none;\n            transition: none;\n          }\n        }\n\n        /* Dark mode adjustments */\n        @media (prefers-color-scheme: light) {\n          :host {\n            --modal-panel-bg: white;\n            --modal-panel-color: #1f2937;\n            --modal-panel-border: rgba(0, 0, 0, 0.1);\n            --modal-header-bg: white;\n            --modal-footer-bg: white;\n            --modal-close-hover-bg: rgba(0, 0, 0, 0.1);\n          }\n\n          ::slotted(.modal__button) {\n            background: #f3f4f6;\n            color: #1f2937;\n          }\n\n          ::slotted(.modal__button:hover) {\n            background: #e5e7eb;\n          }\n        }\n      </style>\n      \n      <div class=\"modal__backdrop\" part=\"backdrop\"></div>\n      <div class=\"modal__panel\" part=\"panel\" role=\"dialog\" aria-modal=\"true\">\n        <header class=\"modal__header\" part=\"header\">\n          <slot name=\"title\"><h2>Dialog</h2></slot>\n          <div class=\"modal__spacer\"></div>\n          <button class=\"modal__close\" aria-label=\"Close\" part=\"close\">×</button>\n        </header>\n        <section class=\"modal__content\" part=\"content\">\n          <slot></slot>\n        </section>\n        <footer class=\"modal__footer\" part=\"footer\">\n          <slot name=\"actions\"></slot>\n        </footer>\n      </div>\n    `;\n\n    // Store element references using BEM naming\n    this._elements = {\n      backdrop: root.querySelector('.modal__backdrop'),\n      panel: root.querySelector('.modal__panel'),\n      close: root.querySelector('.modal__close'),\n    };\n\n    // Bind event handlers\n    this._onKeydown = this._onKeydown.bind(this);\n    this._onFocus = this._onFocus.bind(this);\n  }\n\n  connectedCallback() {\n    this._upgradeProperty('open');\n\n    // Set up event listeners\n    this._elements.backdrop.addEventListener('click', () => {\n      if (this._isBackdropClosable()) {\n        this.close();\n      }\n    });\n\n    this._elements.close.addEventListener('click', () => {\n      if (this._isClosable()) {\n        this.close();\n      }\n    });\n\n    // Global event listeners\n    document.addEventListener('keydown', this._onKeydown);\n    this.addEventListener('focusin', this._onFocus);\n\n    // Set ARIA attributes\n    this._elements.panel.setAttribute('aria-labelledby', this._getTitleId());\n  }\n\n  disconnectedCallback() {\n    document.removeEventListener('keydown', this._onKeydown);\n    this.removeEventListener('focusin', this._onFocus);\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === 'open') {\n      if (this.hasAttribute('open')) {\n        this._onOpen();\n      } else {\n        this._onClose();\n      }\n    }\n  }\n\n  /**\n   * Open the modal\n   */\n  open() {\n    this.setAttribute('open', '');\n  }\n\n  /**\n   * Close the modal\n   */\n  close() {\n    this.removeAttribute('open');\n  }\n\n  /**\n   * Toggle modal open/closed state\n   * @param {boolean} [force] - Force open (true) or close (false)\n   */\n  toggle(force) {\n    if (force === true) {\n      this.open();\n    } else if (force === false) {\n      this.close();\n    } else {\n      this.hasAttribute('open') ? this.close() : this.open();\n    }\n  }\n\n  /**\n   * Check if modal can be closed\n   * @private\n   * @returns {boolean}\n   */\n  _isClosable() {\n    return this.getAttribute('data-modal-closable') !== 'false';\n  }\n\n  /**\n   * Check if modal can be closed by clicking backdrop\n   * @private\n   * @returns {boolean}\n   */\n  _isBackdropClosable() {\n    return this._isClosable() && this.getAttribute('data-modal-backdrop-close') !== 'false';\n  }\n\n  /**\n   * Check if keyboard navigation is enabled\n   * @private\n   * @returns {boolean}\n   */\n  _isKeyboardEnabled() {\n    return this.getAttribute('data-modal-keyboard') !== 'false';\n  }\n\n  /**\n   * Handle modal opening\n   * @private\n   */\n  _onOpen() {\n    // Dispatch open event\n    this.dispatchEvent(new CustomEvent('modal:open', {\n      bubbles: true,\n      detail: { modal: this }\n    }));\n\n    // Focus management\n    requestAnimationFrame(() => {\n      const firstFocusable = this._getFirstFocusable();\n      const focusTarget = firstFocusable || this._elements.close;\n      focusTarget.focus({ preventScroll: true });\n    });\n\n    // Prevent body scroll\n    document.body.style.overflow = 'hidden';\n  }\n\n  /**\n   * Handle modal closing\n   * @private\n   */\n  _onClose() {\n    // Dispatch close event\n    this.dispatchEvent(new CustomEvent('modal:close', {\n      bubbles: true,\n      detail: { modal: this }\n    }));\n\n    // Restore body scroll\n    document.body.style.overflow = '';\n  }\n\n  /**\n   * Handle keyboard events\n   * @private\n   * @param {KeyboardEvent} event\n   */\n  _onKeydown(event) {\n    if (!this.hasAttribute('open') || !this._isKeyboardEnabled()) return;\n\n    if (event.key === 'Escape' && this._isClosable()) {\n      event.preventDefault();\n      this.close();\n    }\n\n    if (event.key === 'Tab') {\n      this._trapTab(event);\n    }\n  }\n\n  /**\n   * Handle focus events for focus trapping\n   * @private\n   */\n  _onFocus() {\n    if (!this.contains(document.activeElement)) {\n      const focusTarget = this._getFirstFocusable() || this._elements.close;\n      focusTarget.focus({ preventScroll: true });\n    }\n  }\n\n  /**\n   * Get all focusable elements within the modal\n   * @private\n   * @returns {HTMLElement[]}\n   */\n  _getFocusableElements() {\n    const selectors = [\n      'a[href]',\n      'button:not([disabled])',\n      'input:not([disabled])',\n      'select:not([disabled])',\n      'textarea:not([disabled])',\n      '[tabindex]:not([tabindex=\"-1\"]):not([disabled])'\n    ];\n\n    return [...this.querySelectorAll(selectors.join(','))];\n  }\n\n  /**\n   * Get the first focusable element\n   * @private\n   * @returns {HTMLElement|null}\n   */\n  _getFirstFocusable() {\n    return this._getFocusableElements()[0] || null;\n  }\n\n  /**\n   * Trap tab navigation within the modal\n   * @private\n   * @param {KeyboardEvent} event\n   */\n  _trapTab(event) {\n    const focusableElements = this._getFocusableElements();\n    if (!focusableElements.length) return;\n\n    const firstElement = focusableElements[0];\n    const lastElement = focusableElements[focusableElements.length - 1];\n    const activeElement = this.contains(document.activeElement) ? document.activeElement : null;\n\n    if (event.shiftKey) {\n      // Shift + Tab\n      if (activeElement === firstElement || !activeElement) {\n        lastElement.focus();\n        event.preventDefault();\n      }\n    } else {\n      // Tab\n      if (activeElement === lastElement) {\n        firstElement.focus();\n        event.preventDefault();\n      }\n    }\n  }\n\n  /**\n   * Get title element ID for ARIA labeling\n   * @private\n   * @returns {string}\n   */\n  _getTitleId() {\n    const titleSlot = this.querySelector('[slot=\"title\"]');\n    if (titleSlot && titleSlot.id) {\n      return titleSlot.id;\n    }\n    return 'modal-title';\n  }\n\n  /**\n   * Upgrade property for proper web component behavior\n   * @private\n   * @param {string} prop\n   */\n  _upgradeProperty(prop) {\n    if (this.hasOwnProperty(prop)) {\n      const value = this[prop];\n      delete this[prop];\n      this[prop] = value;\n    }\n  }\n}\n\n// Auto-register the web component if not already registered\nif (!customElements.get('x-modal')) {\n  customElements.define('x-modal', XModal);\n}","import { BaseComponent } from '../core/BaseComponent.js';\n\nexport class LazyImage extends BaseComponent {\n  static get defaults() {\n    return {\n      threshold: '200px',\n      fadeIn: true,\n      retryAttempts: 3,\n      retryDelay: 1000,\n      placeholderClass: 'lazy-image--loading',\n      loadedClass: 'lazy-image--loaded',\n      errorClass: 'lazy-image--error'\n    };\n  }\n\n  _init(element) {\n    const state = super._init(element);\n\n    const src = this._getDataAttr(element, 'lazyimage-src');\n    const threshold = this._getDataAttr(element, 'lazyimage-threshold', LazyImage.defaults.threshold);\n    const fadeIn = this._getDataAttr(element, 'lazyimage-fadein', LazyImage.defaults.fadeIn);\n\n    if (!src) {\n      this.logger?.warn('LazyImage: No data-lazyimage-src attribute found', element);\n      return state;\n    }\n\n    element.classList.add(LazyImage.defaults.placeholderClass);\n\n    const observer = new IntersectionObserver((entries) => {\n      for (const entry of entries) {\n        if (entry.isIntersecting) {\n          this._loadImage(element, src, { fadeIn });\n          observer.disconnect();\n        }\n      }\n    }, {\n      rootMargin: threshold,\n      threshold: 0.1\n    });\n\n    observer.observe(element);\n\n    state.observer = observer;\n    state.src = src;\n    state.loaded = false;\n\n    const originalCleanup = state.cleanup;\n    state.cleanup = () => {\n      observer.disconnect();\n      originalCleanup();\n    };\n\n    this.logger?.info('LazyImage initialized', { element, src, threshold });\n\n    return state;\n  }\n\n  _loadImage(element, src, { fadeIn }) {\n    const img = new Image();\n\n    img.onload = () => {\n      const state = this.getState(element);\n      if (!state || state.loaded) return;\n\n      state.loaded = true;\n      element.src = src;\n\n      element.classList.remove(LazyImage.defaults.placeholderClass, LazyImage.defaults.errorClass);\n      element.classList.add(LazyImage.defaults.loadedClass);\n\n      if (fadeIn) {\n        element.style.opacity = '0';\n        element.style.transition = 'opacity 0.3s ease-in-out';\n        requestAnimationFrame(() => {\n          element.style.opacity = '1';\n        });\n      }\n\n      this._dispatch(element, 'lazy:loaded', { src });\n      this.eventBus?.emit('lazy-image:loaded', { element, src });\n\n      this.logger?.info('LazyImage: Successfully loaded', { element, src });\n    };\n\n    img.onerror = () => {\n      element.classList.remove(LazyImage.defaults.placeholderClass);\n      element.classList.add(LazyImage.defaults.errorClass);\n\n      this._dispatch(element, 'lazy:error', { src });\n      this.eventBus?.emit('lazy-image:error', { element, src });\n\n      this.logger?.error('LazyImage: Failed to load', { element, src });\n    };\n\n    img.src = src;\n  }\n\n  static enhanceAll(selector = '[data-lazyimage][data-lazyimage-src]', options) {\n    const instance = new LazyImage(options);\n    const elements = document.querySelectorAll(selector);\n\n    elements.forEach(element => {\n      instance.mount(element);\n    });\n\n    return instance;\n  }\n}","/**\n * Modal - Modal dialog enhancement component\n * Works with XModal web component and data attributes for modal triggers\n * Follows new naming conventions: data-modal-* attributes\n *\n * @example\n * HTML:\n * <button data-modal data-modal-target=\"#example-modal\">Open Modal</button>\n *\n * <x-modal id=\"example-modal\"\n *          data-modal-size=\"large\"\n *          data-modal-closable=\"true\">\n *   <h2 slot=\"title\">Modal Title</h2>\n *   <p>Modal content goes here.</p>\n *   <div slot=\"actions\">\n *     <button class=\"modal__button modal__button--secondary\" data-modal-close>Cancel</button>\n *     <button class=\"modal__button modal__button--primary\">Save</button>\n *   </div>\n * </x-modal>\n *\n * JavaScript (standalone):\n * import { Modal } from './components/Modal.js';\n * const modals = new Modal();\n * document.querySelectorAll('[data-modal]')\n *   .forEach(trigger => modals.mount(trigger));\n */\n\nimport { BaseComponent } from '../core/BaseComponent.js';\nimport { XModal } from './XModal.js';\n\nexport class Modal extends BaseComponent {\n    /**\n     * Default options for modal enhancement\n     */\n    static get defaults() {\n        return {\n            size: 'medium',              // Modal size: small, medium, large, fullscreen\n            closable: true,              // Whether modal can be closed\n            backdropClose: true,         // Close on backdrop click\n            keyboard: true,              // Enable keyboard navigation\n            focus: true,                 // Auto-focus when opened\n            multiple: false,             // Allow multiple modals\n            appendTo: 'body'             // Where to append modal elements\n        };\n    }\n\n    /**\n     * Initialize modal enhancement for a trigger element\n     * @protected\n     * @param {HTMLElement} element - Trigger element to enhance\n     * @returns {import('../core/BaseComponent.js').ComponentState} Component state\n     */\n    _init(element) {\n        const state = super._init(element);\n\n        // Get configuration from data attributes\n        const target = this._getDataAttr(element, 'modal-target');\n        const size = this._getDataAttr(element, 'modal-size', Modal.defaults.size);\n        const closable = this._getDataAttr(element, 'modal-closable', Modal.defaults.closable);\n        const backdropClose = this._getDataAttr(element, 'modal-backdrop-close', Modal.defaults.backdropClose);\n        const keyboard = this._getDataAttr(element, 'modal-keyboard', Modal.defaults.keyboard);\n        const focus = this._getDataAttr(element, 'modal-focus', Modal.defaults.focus);\n        const multiple = this._getDataAttr(element, 'modal-multiple', Modal.defaults.multiple);\n\n        if (!target) {\n            this.logger?.warn('Modal: No data-modal-target attribute found', element);\n            return state;\n        }\n\n        // Find or create target modal\n        let modalElement = document.querySelector(target);\n        if (!modalElement) {\n            this.logger?.warn('Modal: Target modal not found', {target, element});\n            return state;\n        }\n\n        // Ensure it's an x-modal element\n        if (modalElement.tagName.toLowerCase() !== 'x-modal') {\n            this.logger?.warn('Modal: Target is not an x-modal element', {target, element});\n            return state;\n        }\n\n        // Configure modal attributes\n        this._configureModal(modalElement, {\n            size,\n            closable,\n            backdropClose,\n            keyboard\n        });\n\n        // Store state\n        state.target = target;\n        state.modalElement = modalElement;\n        state.size = size;\n        state.closable = closable;\n        state.backdropClose = backdropClose;\n        state.keyboard = keyboard;\n        state.focus = focus;\n        state.multiple = multiple;\n\n        // Set up event listeners\n        element.addEventListener('click', this._handleTriggerClick.bind(this, element), {\n            signal: state.controller.signal\n        });\n\n        // Listen for modal events\n        modalElement.addEventListener('modal:open', this._handleModalOpen.bind(this, element), {\n            signal: state.controller.signal\n        });\n\n        modalElement.addEventListener('modal:close', this._handleModalClose.bind(this, element), {\n            signal: state.controller.signal\n        });\n\n        // Set up ARIA attributes\n        element.setAttribute('aria-haspopup', 'dialog');\n        element.setAttribute('aria-expanded', 'false');\n        if (!element.getAttribute('aria-controls')) {\n            element.setAttribute('aria-controls', target.replace('#', ''));\n        }\n\n        this.logger?.info('Modal trigger initialized', {\n            element,\n            target,\n            size,\n            closable\n        });\n\n        return state;\n    }\n\n    /**\n     * Open a modal\n     * @param {HTMLElement} triggerElement - Trigger element\n     */\n    open(triggerElement) {\n        const state = this.getState(triggerElement);\n        if (!state?.modalElement) return;\n\n        // Close other modals if multiple is not allowed\n        if (!state.multiple) {\n            this._closeOtherModals(state.modalElement);\n        }\n\n        // Store the trigger element for focus restoration\n        state.modalElement._triggerElement = triggerElement;\n\n        // Open the modal\n        state.modalElement.open();\n    }\n\n    /**\n     * Close a modal\n     * @param {HTMLElement} triggerElement - Trigger element\n     */\n    close(triggerElement) {\n        const state = this.getState(triggerElement);\n        if (!state?.modalElement) return;\n\n        state.modalElement.close();\n    }\n\n    /**\n     * Toggle a modal\n     * @param {HTMLElement} triggerElement - Trigger element\n     * @param {boolean} [force] - Force open (true) or close (false)\n     */\n    toggle(triggerElement, force) {\n        const state = this.getState(triggerElement);\n        if (!state?.modalElement) return;\n\n        if (force === true) {\n            this.open(triggerElement);\n        } else if (force === false) {\n            this.close(triggerElement);\n        } else {\n            if (state.modalElement.hasAttribute('open')) {\n                this.close(triggerElement);\n            } else {\n                this.open(triggerElement);\n            }\n        }\n    }\n\n    /**\n     * Check if a modal is open\n     * @param {HTMLElement} triggerElement - Trigger element\n     * @returns {boolean} Whether modal is open\n     */\n    isOpen(triggerElement) {\n        const state = this.getState(triggerElement);\n        return state?.modalElement?.hasAttribute('open') || false;\n    }\n\n    /**\n     * Configure modal element with data attributes\n     * @private\n     * @param {XModal} modalElement - Modal element\n     * @param {Object} config - Configuration object\n     */\n    _configureModal(modalElement, config) {\n        if (config.size) {\n            modalElement.setAttribute('data-modal-size', config.size);\n        }\n\n        if (config.closable !== undefined) {\n            modalElement.setAttribute('data-modal-closable', String(config.closable));\n        }\n\n        if (config.backdropClose !== undefined) {\n            modalElement.setAttribute('data-modal-backdrop-close', String(config.backdropClose));\n        }\n\n        if (config.keyboard !== undefined) {\n            modalElement.setAttribute('data-modal-keyboard', String(config.keyboard));\n        }\n    }\n\n    /**\n     * Handle trigger click\n     * @private\n     * @param {HTMLElement} triggerElement - Trigger element\n     * @param {Event} event - Click event\n     */\n    _handleTriggerClick(triggerElement, event) {\n        event.preventDefault();\n        this.open(triggerElement);\n    }\n\n    /**\n     * Handle modal open event\n     * @private\n     * @param {HTMLElement} triggerElement - Trigger element\n     * @param {CustomEvent} event - Modal open event\n     */\n    _handleModalOpen(triggerElement, event) {\n        // Update ARIA attributes\n        triggerElement.setAttribute('aria-expanded', 'true');\n\n        // Dispatch enhancement event\n        this._dispatch(triggerElement, 'modal:opened', {\n            trigger: triggerElement,\n            modal: event.detail.modal\n        });\n\n        // Emit to event bus if available\n        this.eventBus?.emit('modal:opened', {\n            trigger: triggerElement,\n            modal: event.detail.modal\n        });\n\n        this.logger?.info('Modal opened', {triggerElement, modal: event.detail.modal});\n    }\n\n    /**\n     * Handle modal close event\n     * @private\n     * @param {HTMLElement} triggerElement - Trigger element\n     * @param {CustomEvent} event - Modal close event\n     */\n    _handleModalClose(triggerElement, event) {\n        // Update ARIA attributes\n        triggerElement.setAttribute('aria-expanded', 'false');\n\n        // Restore focus to trigger\n        const state = this.getState(triggerElement);\n        if (state?.focus && event.detail.modal._triggerElement) {\n            requestAnimationFrame(() => {\n                event.detail.modal._triggerElement.focus();\n            });\n        }\n\n        // Dispatch enhancement event\n        this._dispatch(triggerElement, 'modal:closed', {\n            trigger: triggerElement,\n            modal: event.detail.modal\n        });\n\n        // Emit to event bus if available\n        this.eventBus?.emit('modal:closed', {\n            trigger: triggerElement,\n            modal: event.detail.modal\n        });\n\n        this.logger?.info('Modal closed', {triggerElement, modal: event.detail.modal});\n    }\n\n    /**\n     * Close other open modals\n     * @private\n     * @param {XModal} currentModal - Current modal to keep open\n     */\n    _closeOtherModals(currentModal) {\n        const openModals = document.querySelectorAll('x-modal[open]');\n        openModals.forEach(modal => {\n            if (modal !== currentModal) {\n                modal.close();\n            }\n        });\n    }\n\n    /**\n     * Update modal configuration\n     * @param {HTMLElement} triggerElement - Trigger element\n     * @param {Object} newConfig - New configuration\n     */\n    updateConfig(triggerElement, newConfig) {\n        const state = this.getState(triggerElement);\n        if (!state?.modalElement) return;\n\n        // Update state\n        Object.assign(state, newConfig);\n\n        // Update modal element\n        this._configureModal(state.modalElement, newConfig);\n\n        this.logger?.info('Modal configuration updated', {triggerElement, newConfig});\n    }\n\n    /**\n     * Static method to enhance all modal triggers on the page\n     * @param {string} [selector='[data-modal][data-modal-target]'] - CSS selector\n     * @param {Object} [options] - Component options\n     * @returns {Modal} Modal instance\n     */\n    static enhanceAll(selector = '[data-modal][data-modal-target]', options) {\n        const instance = new Modal(options);\n        const elements = document.querySelectorAll(selector);\n\n        elements.forEach(element => {\n            instance.mount(element);\n        });\n\n        return instance;\n    }\n\n    /**\n     * Static method to create a modal programmatically\n     * @param {Object} config - Modal configuration\n     * @param {string} config.title - Modal title\n     * @param {string} config.content - Modal content (HTML)\n     * @param {Array} [config.actions] - Action buttons\n     * @param {string} [config.size] - Modal size\n     * @param {Object} [config.options] - Additional options\n     * @returns {Promise<XModal>} Modal element\n     */\n    static async create({\n                            title,\n                            content,\n                            actions = [],\n                            size = 'medium',\n                            options = {}\n                        }) {\n        // Create modal element\n        const modal = document.createElement('x-modal');\n        modal.id = `modal-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n\n        // Configure attributes\n        modal.setAttribute('data-modal-size', size);\n        Object.entries(options).forEach(([key, value]) => {\n            modal.setAttribute(`data-modal-${key}`, String(value));\n        });\n\n        // Create title\n        if (title) {\n            const titleElement = document.createElement('h2');\n            titleElement.slot = 'title';\n            titleElement.textContent = title;\n            modal.appendChild(titleElement);\n        }\n\n        // Create content\n        if (content) {\n            const contentElement = document.createElement('div');\n            contentElement.innerHTML = content;\n            modal.appendChild(contentElement);\n        }\n\n        // Create actions\n        if (actions.length > 0) {\n            const actionsContainer = document.createElement('div');\n            actionsContainer.slot = 'actions';\n\n            actions.forEach(action => {\n                const button = document.createElement('button');\n                button.className = `modal__button modal__button--${action.type || 'secondary'}`;\n                button.textContent = action.label;\n\n                if (action.close !== false) {\n                    button.setAttribute('data-modal-close', '');\n                }\n\n                if (action.onClick) {\n                    button.addEventListener('click', action.onClick);\n                }\n\n                actionsContainer.appendChild(button);\n            });\n\n            modal.appendChild(actionsContainer);\n        }\n\n        // Append to document\n        document.body.appendChild(modal);\n    }\n}"],"names":["EventManager","constructor","listeners","Map","on","event","callback","has","set","Set","get","add","off","once","unsubscribe","payload","delete","size","emit","listenersCopy","error","console","clear","DevLogger","namespace","enabled","setEnabled","Boolean","_getPrefix","level","Date","toISOString","log","args","info","warn","child","subNamespace","BaseComponent","options","eventBus","logger","elements","WeakMap","_elementKeys","mount","element","update","state","_init","unmount","cleanup","getState","controller","AbortController","abort","_getDataAttr","name","defaultValue","value","getAttribute","numValue","Number","isNaN","isFinite","_dispatch","eventName","detail","bubbles","CustomEvent","cancelable","dispatchEvent","XToasts","HTMLElement","root","attachShadow","mode","innerHTML","_container","getElementById","_idCounter","_toasts","toast","message","type","timeout","allowHTML","id","document","createElement","className","setAttribute","row","messageElement","textContent","closeButton","appendChild","isRemoved","dismiss","style","animation","setTimeout","remove","addEventListener","customElements","define","AlertManager","placement","container","toastElement","_getOrCreateToastElement","_setupEventForwarding","success","body","querySelector","events","forEach","split","notify","_globalInstance","XModal","observedAttributes","_elements","backdrop","panel","close","_onKeydown","bind","_onFocus","connectedCallback","_upgradeProperty","_isBackdropClosable","_isClosable","_getTitleId","disconnectedCallback","removeEventListener","attributeChangedCallback","oldValue","newValue","hasAttribute","_onOpen","_onClose","open","removeAttribute","toggle","force","_isKeyboardEnabled","modal","requestAnimationFrame","firstFocusable","_getFirstFocusable","focusTarget","focus","preventScroll","overflow","key","preventDefault","_trapTab","contains","activeElement","_getFocusableElements","selectors","querySelectorAll","join","focusableElements","length","firstElement","lastElement","shiftKey","titleSlot","prop","hasOwnProperty","LazyImage","defaults","threshold","fadeIn","retryAttempts","retryDelay","placeholderClass","loadedClass","errorClass","src","classList","observer","IntersectionObserver","entries","entry","isIntersecting","_loadImage","disconnect","rootMargin","observe","loaded","originalCleanup","img","Image","onload","opacity","transition","onerror","enhanceAll","selector","instance","Modal","closable","backdropClose","keyboard","multiple","appendTo","target","modalElement","tagName","toLowerCase","_configureModal","_handleTriggerClick","signal","_handleModalOpen","_handleModalClose","replace","triggerElement","_closeOtherModals","_triggerElement","isOpen","config","undefined","String","trigger","currentModal","openModals","updateConfig","newConfig","Object","assign","create","title","content","actions","now","Math","random","toString","substr","titleElement","slot","contentElement","actionsContainer","action","button","label","onClick"],"mappings":"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,KAAC,CAAC;;EAEhD;MACAF,IAAI,CAACG,SAAS,GAAG;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,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"}